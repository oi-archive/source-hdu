{"title":"Wow! Such Sequence!","time_limit":5000,"memory_limit":64,"operation":{"submit":"http://acm.hdu.edu.cn/submit.php?pid=4893","submissions":"http://acm.hdu.edu.cn/status.php?first=&pid=4893&user=&lang=0&status=0","statistics":"http://acm.hdu.edu.cn/statistic.php?pid=4893","discussion":"http://acm.hdu.edu.cn/discuss/problem/list.php?problemid=4893"},"statement":[{"title":"Problem Description","content":"   Recently, Doge got a funny birthday present from his new friend, Protein Tiger from St. Beeze College. No, not cactuses. It&apos;s a mysterious blackbox.<br><br>   After some research, Doge found that the box is maintaining a sequence an of n numbers internally, initially all numbers are zero, and there are THREE &quot;operations&quot;:<br><br>    1.Add d to the k-th number of the sequence.<br>    2.Query the sum of ai where  l &#x2264; i &#x2264; r.<br>    3.Change ai to the nearest Fibonacci number, where l &#x2264; i &#x2264; r.<br>    4.Play sound &quot;Chee-rio!&quot;, a bit useless.<br><br>   Let F<sub>0</sub> = 1,F<sub>1</sub> = 1,Fibonacci number Fn is defined as F<sub>n</sub> = F<sub>n - 1</sub> + F<sub>n - 2</sub> for n &#x2265; 2.<br><br>   Nearest Fibonacci number of number x means the smallest Fn where |F<sub>n</sub> - x| is also smallest.<br><br>   Doge doesn&apos;t believe the machine could respond each request in less than 10ms. Help Doge figure out the reason.","type":"description","format":"html"},{"title":"Input","content":"   Input contains several test cases, please process till EOF.<br>   For each test case, there will be one line containing two integers n, m.<br>   Next m lines, each line indicates a query:<br><br>     1 k d - &quot;add&quot;<br>     2 l r - &quot;query sum&quot;<br>     3 l r - &quot;change to nearest Fibonacci&quot;<br><br>   1 &#x2264; n &#x2264; 100000,  1 &#x2264; m &#x2264; 100000, |d| &lt; 2<sup>31</sup>, all queries will be valid.","type":"input_format","format":"html"},{"title":"Output","content":"   For each Type 2 (&quot;query sum&quot;) operation, output one line containing an integer represent the answer of this query.","type":"output_format","format":"html"},{"title":"Sample Input","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">1 1\n2 1 1\n5 4\n1 1 7\n1 3 17\n3 2 4\n2 1 5</div></pre>","type":"example","format":"html"},{"title":"Sample Output","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">0\n22</div></pre>","type":"example","format":"html"},{"title":"Author","content":"Fudan University","type":"source","format":"html"},{"title":"Source","content":" <a href=\"/search.php?field=problem&amp;key=2014+Multi-University+Training+Contest+3&amp;source=1&amp;searchmode=source\"> 2014 Multi-University Training Contest 3 </a> ","type":"source","format":"html"}]}