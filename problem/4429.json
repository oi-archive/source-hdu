{"title":"Split the Rectangle","time_limit":1000,"memory_limit":32,"operation":{"submit":"http://acm.hdu.edu.cn/submit.php?pid=4429","submissions":"http://acm.hdu.edu.cn/status.php?first=&pid=4429&user=&lang=0&status=0","statistics":"http://acm.hdu.edu.cn/statistic.php?pid=4429","discussion":"http://acm.hdu.edu.cn/discuss/problem/list.php?problemid=4429"},"statement":[{"title":"Problem Description","content":"          Alice comes up with a new game and wants to play with Bob.<br>There is one rectangle on the paper initially, we define its lower-left corner&apos;s coordinate is (x<sub>L</sub>, y<sub>L</sub>) and upper-right corner&apos;s coordinate is (x<sub>R</sub>, y<sub>R</sub>).<br>         Bob has executed the step as description below N times:<br>         Bob should select one empty rectangle. If the rectangle is the initial one or is split by one vertical segment, he should split it into two parts by drawing one horizontal segment; otherwise he should split the rectangle into two parts by drawing one vertical segment. An empty rectangle means there is no segment in this rectangle except its only four boundary segments.<br>         You should pay attention that there are only two kinds segments: vertical segment and horizontal segment.<br>         Now Bob has several queries. In each query, Bob selects two target points in the paper. (You can assume that all given target points are always located inside the initial rectangle and not in any drawing segments.) He wants Alice to answer the question as soon as possible: Alice can erase several existing segments, and make two target points in one empty rectangle, and she should answer how many empty rectangles at most would be left at last.<br>          But there are some restrictions: Alice cannot erase segments of the initial rectangle (the (x<sub>L</sub>, y<sub>L</sub>) to (x<sub>R</sub>, y<sub>R</sub>) one), she can only erase segments drew by Bob; if Alice want to erase one segment, both sides of the segment must be empty rectangles, and after erase it, the two empty rectangles must combine to one bigger empty rectangle; if erasing an existing segment will lead to a disconnected graph, the operation is forbidden.<br><center><img style=\"max-width:100%;\" src=\"../../data/images/4429-1.png\"></center><br>","type":"description","format":"html"},{"title":"Input","content":"          There are multiple test cases.<br>          The first line contains four integers x<sub>L</sub>, y<sub>L</sub>, x<sub>R</sub>, y<sub>R</sub> indicating the coordinates of the lower-left corner and the upper-right corner of the initial huge rectangle respectively. (-100,000 &lt;= x<sub>L</sub>, y<sub>L</sub>, x<sub>R</sub>, y<sub>R</sub> &lt;= 100,000, x<sub>L</sub>&lt; x<sub>R</sub>, y<sub>L</sub>&lt; y<sub>R</sub>)<br>          The next line contains two integers N and Q. (1 &lt;= N, Q &lt;= 1000)<br>          The next N lines each line contains four integers x<sub>1</sub>, y<sub>1</sub>, x<sub>2</sub>, y<sub>2</sub> indicating the coordinates of two endpoints of one drawing segments. (-100,000 &lt;= x<sub>1</sub>, y<sub>1</sub>, x<sub>2</sub>, y<sub>2</sub> &lt;= 100,000, x<sub>1</sub>=x<sub>2</sub> | y<sub>1</sub>=y<sub>2</sub>)<br>The next Q lines each line contains four integers x<sub>A</sub>, y<sub>A</sub>, x<sub>B</sub>, y<sub>B</sub> indicating the coordinates of two target points in this query. (-100,000 &lt;= x<sub>A</sub>, y<sub>A</sub>, x<sub>B</sub>, y<sub>B</sub> &lt;= 100,000).<br><br>","type":"input_format","format":"html"},{"title":"Output","content":"           For each test case, output Q lines, output the answer of each query in each line.","type":"output_format","format":"html"},{"title":"Sample Input","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">-10 -10 10 10\n5 1\n-10 0 10 0  \n5 -10 5 0\n-5 0 -5 10\n-5 5 10 5\n5 -5 10 -5\n0 -3 7 -3\n0 0 4 4\n3 2\n0 2 4 2\n2 0 2 2\n2 2 2 4\n1 1 1 3\n1 1 3 1\n-10 -10 10 10\n3 4\n-10 0 10 0\n0 -10 0 0\n0 0 0 10\n-9 -9 -8 -8\n-9 -9 -9 9\n-9 -9 9 -9\n-9 -9 9 9</div></pre>","type":"example","format":"html"},{"title":"Sample Output","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">4\n1\n3\n4\n1\n3\n1</div></pre>","type":"example","format":"html"},{"title":"Source","content":" <a href=\"/search.php?field=problem&amp;key=2012+Asia+ChangChun+Regional+Contest&amp;source=1&amp;searchmode=source\"> 2012 Asia ChangChun Regional Contest </a> ","type":"source","format":"html"}]}