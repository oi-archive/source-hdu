{"title":"pog loves szh III","time_limit":6000,"memory_limit":128,"operation":{"submit":"http://acm.hdu.edu.cn/submit.php?pid=5266","submissions":"http://acm.hdu.edu.cn/status.php?first=&pid=5266&user=&lang=0&status=0","statistics":"http://acm.hdu.edu.cn/statistic.php?pid=5266","discussion":"http://acm.hdu.edu.cn/discuss/problem/list.php?problemid=5266"},"statement":[{"title":"Problem Description","content":"Pog and Szh are playing games. Firstly Pog draw a tree on the paper. Here we define 1 as the root of the tree.Then Szh choose some nodes from the tree. He wants Pog helps to find the least common ancestor (LCA) of these node.The question is too difficult for Pog.So he decided to simplify the problems.The nodes picked are consecutive numbers from $l_i$ to $r_i$ $([l_i, r_i])$.<br><br>Hint : You should be careful about stack overflow !","type":"description","format":"html","require":["katex"]},{"title":"Input","content":"Several groups of data (no more than 3 groups,$n \\geq 10000$ or $Q \\geq 10000$).<br><br>The following line contains ans integers,$n (2 \\leq n \\leq 300000)$.<br><br>AT The following $n-1$ line, two integers are $b_i$ and $c_i$ at every line,  it shows an edge connecting $b_i$ and $c_i$. <br><br>The following line contains ans integers,$Q (Q \\leq 300000)$.<br><br>AT The following $Q$ line contains two integers li and ri($1 \\leq li \\leq ri \\leq n$).","type":"input_format","format":"html","require":["katex"]},{"title":"Output","content":"For each case,output $Q$ integers means the LCA of $[l_i,r_i]$.","type":"output_format","format":"html","require":["katex"]},{"title":"Sample Input","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">5\n1 2\n1 3\n3 4\n4 5\n5\n1 2\n2 3\n3 4\n3 5\n1 5</div></pre>","type":"example","format":"html","require":["katex"]},{"title":"Sample Output","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">1\n1\n3\n3\n1\n\n\n<div style=\"font-family:Times New Roman;font-size:14px;background-color:F4FBFF;border:#B7CBFF 1px dashed;padding:6px\"><div style=\"font-family:Arial;font-weight:bold;color:#7CA9ED;border-bottom:#B7CBFF 1px dashed\"><i>Hint</i></div>Be careful about stack overflow.</div><i style=\"font-size:1px\"> </i></div></pre>","type":"example","format":"html","require":["katex"]},{"title":"Source","content":" <a href=\"/search.php?field=problem&amp;key=BestCoder+Round+%2343&amp;source=1&amp;searchmode=source\"> BestCoder Round #43 </a> ","type":"source","format":"html","require":["katex"]}]}