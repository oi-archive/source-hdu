{"title":"Looploop","time_limit":1000,"memory_limit":32,"operation":{"submit":"http://acm.hdu.edu.cn/submit.php?pid=4453","submissions":"http://acm.hdu.edu.cn/status.php?first=&pid=4453&user=&lang=0&status=0","statistics":"http://acm.hdu.edu.cn/statistic.php?pid=4453","discussion":"http://acm.hdu.edu.cn/discuss/problem/list.php?problemid=4453"},"statement":[{"title":"Problem Description","content":"XXX gets a new toy named Looploop. The toy has N elements arranged in a loop, an arrow pointing to one of the elements, and two preset parameters k1 and k2. Every element has a number on it.<br><br><center><img style=\"max-width:100%;\" src=\"../../data/images/4453-1.jpg\"></center> <br><br>The figure above shows a Looploop of 6 elments. Let&apos;s assuming the preset parameter k1 is 3, and k2 is 4.<br>XXX can do six operations with the toy. <br><br>1: add x <br>Starting from the arrow pointed element, add x to the number on the clockwise first k2 elements.<br><br><center><img style=\"max-width:100%;\" src=\"../../data/images/4453-2.jpg\"></center> <br><br>2: reverse<br>Starting from the arrow pointed element, reverse the first k1 clockwise elements.<br><br><center><img style=\"max-width:100%;\" src=\"../../data/images/4453-3.jpg\"></center> <br><br>3: insert x <br>Insert a new element with number x to the right (along clockwise) of the arrow pointed element.<br><br><center><img style=\"max-width:100%;\" src=\"../../data/images/4453-4.jpg\"></center> <br><br>4: delete <br>Delete the element the arrow pointed and then move the arrow to the right element.<br><br><center><img style=\"max-width:100%;\" src=\"../../data/images/4453-5.jpg\"></center> <br><br>5: move x <br>x can only be 1 or 2. If x = 1 , move the arrow to the left(along the counterclockwise) element, if x = 2 move the arrow to the right element.<br><br><center><img style=\"max-width:100%;\" src=\"../../data/images/4453-6.jpg\"></center> <br><br>6: query<br>Output the number on the arrow pointed element in one line.<br><br><center><img style=\"max-width:100%;\" src=\"../../data/images/4453-7.jpg\"></center> <br><br>XXX wants to give answers to every query in a serial of operations.<br>","type":"description","format":"html","require":["katex"]},{"title":"Input","content":"There are multiple test cases.<br>For each test case the first line contains N,M,k1,k2(2&#x2264;k1&lt;k2&#x2264;N&#x2264;10<sup>5</sup>, M&#x2264;10<sup>5</sup>) indicating the initial number of elements, the total number of operations XXX will do and the two preset parameters of the toy. <br>Second line contains N integers ai(-10<sup>4</sup>&#x2264;ai&#x2264;10<sup>4</sup>) representing the N numbers on the elements in Looploop along clockwise direction. The arrow points to first element in input at the beginning. <br>Then m lines follow, each line contains one of the six operations described above.<br>It is guaranteed that the &quot;x&quot; in the &quot;add&quot;,&quot;insert&quot; and &quot;move&quot; operations is always integer and its absolute value &#x2264;104. The number of elements will never be less than N during the operations. <br>The input ends with a line of 0 0 0 0.","type":"input_format","format":"html","require":["katex"]},{"title":"Output","content":"For each test case, output case number in the first line(formatted as the sample output). Then for each query in the case, output the number on the arrow pointed element in a single line.","type":"output_format","format":"html","require":["katex"]},{"title":"Sample Input","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">5 1 2 4\n3 4 5 6 7\nquery\n5 13 2 4\n1 2 3 4 5\nmove 2\nquery\ninsert 8\nreverse\nquery\nadd 2\nquery\nmove 1\nquery\nmove 1\nquery\ndelete\nquery\n0 0 0 0</div></pre>","type":"example","format":"html","require":["katex"]},{"title":"Sample Output","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">Case #1:\n3\nCase #2:\n2\n8\n10\n1\n5\n1</div></pre>","type":"example","format":"html","require":["katex"]},{"title":"Source","content":" <a href=\"/search.php?field=problem&amp;key=2012+Asia+Hangzhou+Regional+Contest&amp;source=1&amp;searchmode=source\"> 2012 Asia Hangzhou Regional Contest </a> ","type":"source","format":"html","require":["katex"]}]}