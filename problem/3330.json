{"title":"Hereâ€™s a Product Which Will Make You Tensor","time_limit":2000,"memory_limit":32,"operation":{"submit":"http://acm.hdu.edu.cn/submit.php?pid=3330","submissions":"http://acm.hdu.edu.cn/status.php?first=&pid=3330&user=&lang=0&status=0","statistics":"http://acm.hdu.edu.cn/statistic.php?pid=3330","discussion":"http://acm.hdu.edu.cn/discuss/problem/list.php?problemid=3330"},"statement":[{"title":"Problem Description","content":"Most people are familiar with how to multiply two matrices together. However, an alternate form of multiplication known as tensor multiplication exists as well, and works more like you would expect matrix multiplication should. Let <i>A</i> be a <i>p</i> &#xD7; <i>q</i> matrix and <i>B</i> be an <i>n</i> &#xD7;<i> m</i> matrix, where neither <i>A</i> nor <i>B</i> is a 1 &#xD7; 1 matrix. Then the tensor product  <img style=\"max-width:100%;\" src=\"../../../data/images/C272-1006-1.JPG\">  is a <i>pn</i> &#xD7; <i>qm</i> matrix formed by replacing each element <i>a<sub>ij</sub></i> in A with the matrix (<i>a<sub>ij</sub></i>) &#xB7; <i>B</i>. Two examples are shown below, which also demonstrate that, like normal matrix multiplication, tensor multiplication is non-commutative:<br><br><center><img style=\"max-width:100%;\" src=\"../../../data/images/C272-1006-2.JPG\"></center><br>Note that there is no restriction that the number of columns in the first matrix must equal the number of rows in the second, as there is with normal matrix multiplication. The object of this problem is to determine the number of ways (if any) a given matrix can be formed as a result of a tensor multiplication.","type":"description","format":"html"},{"title":"Input","content":"The first line of input for a test case will contain two positive integers <i>r</i> and <i>c</i> indicating the number of rows and columns in the matrix. After this will follow <i>r</i> lines each containing <i>c</i> positive integers. The values of <i>r</i> and <i>c</i> will be &#x2264; 500, each entry in the matrix will be no greater than 65,536, and the last test case is followed by a line containing 0 0.","type":"input_format","format":"html"},{"title":"Output","content":"For each test case, output the number of different ways the matrix could be the tensor product of two positive integer matrices, neither of which is a 1 &#xD7; 1 matrix.","type":"output_format","format":"html"},{"title":"Sample Input","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">6 6\n1 1 1 2 2 2\n1 1 1 2 2 2\n1 1 2 2 2 4\n3 3 3 4 4 4\n3 3 3 4 4 4\n3 3 6 4 4 8\n2 2\n3 6\n4 9\n2 4\n15 18 30 36\n20 24 40 48\n0 0</div></pre>","type":"example","format":"html"},{"title":"Sample Output","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">1\n0\n4</div></pre>","type":"example","format":"html"},{"title":"Source","content":" <a href=\"/search.php?field=problem&amp;key=East+Central+North+America+2009&amp;source=1&amp;searchmode=source\"> East Central North America 2009 </a> ","type":"source","format":"html"}]}