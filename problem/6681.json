{"title":"Rikka with Cake","time_limit":3000,"memory_limit":512,"operation":{"submit":"http://acm.hdu.edu.cn/submit.php?pid=6681","submissions":"http://acm.hdu.edu.cn/status.php?first=&pid=6681&user=&lang=0&status=0","statistics":"http://acm.hdu.edu.cn/statistic.php?pid=6681","discussion":"http://acm.hdu.edu.cn/discuss/problem/list.php?problemid=6681"},"statement":[{"title":"Problem Description","content":"Rikka&apos;s birthday is on June 12th. The story of this problem happens on that day.<br><br>Today is Rikka&apos;s birthday. Yuta prepares a big cake for her: the shape of this cake is a rectangular of $n$ centimeters times $m$ centimeters. With the guidance of a grimoire, Rikka is going to cut the cake.<br><br>For simplicity, Rikka firstly builds a Cartesian coordinate system on the cake: the coordinate of the left bottom corner is $(0,0)$ while that of the right top corner is $(n,m)$. There are $K$ instructions on the grimoire: The $i$th cut is a ray starting from $(x_i,y_i)$ while the direction is $D_i$. There are four possible directions: L, passes $(x_i-1,y_i)$; R, passes $(x_i+1,y_i)$; U, passes $(x_i,y_i+1)$; D, passes $(x_i,y_i-1)$.<br><br>Take advantage of the infinite power of Tyrant&apos;s Eye, Rikka finishes all the instructions quickly. Now she wants to count the number of pieces of the cake. However, since a huge number of cuts have been done, the number of pieces can be very large. Therefore, Rikka wants you to finish this task.","type":"description","format":"html"},{"title":"Input","content":"The first line of the input contains a single integer $T(1 \\leq T \\leq 100)$, the number of the test cases.<br><br>For each test case, the first line contains three positive integers $n,m,K(1 \\leq n,m \\leq 10^9, 1 \\leq K \\leq 10^5)$, which represents the shape of the cake and the number of instructions on the grimoire. <br><br>Then $K$ lines follow, the $i$th line contains two integers $x_i,y_i(1 \\leq x_i &lt; n, 1 \\leq y_i &lt;m)$ and a char $D_i  \\in \\{$&apos;L&apos;,&apos;R&apos;,&apos;U&apos;,&apos;D&apos;$\\}$, which describes the $i$th cut.<br><br>The input guarantees that there are no more than $5$ test cases with $K &gt; 1000$, and no two cuts share the same $x$ coordinate or $y$ coordinate, i.e., $\\forall 1 \\leq i &lt; j  \\leq K$, $x_i \\neq x_j$ and $y_i \\neq y_j$.","type":"input_format","format":"html"},{"title":"Output","content":"For each test case, output a single line with a single integer, the number of pieces of the cake.<br><br><div style=\"font-family:Times New Roman;font-size:14px;background-color:F4FBFF;border:#B7CBFF 1px dashed;padding:6px\"><div style=\"font-family:Arial;font-weight:bold;color:#7CA9ED;border-bottom:#B7CBFF 1px dashed\"><i>Hint</i></div><br>The left image and the right image show the results of the first and the second test case in the sample input respectively. Clearly, the answer to the first test case is $3$ while the second one is $5$.<br><center><img style=\"max-width:100%;\" src=\"../../../data/images/C586-1002-1.png\"></center><br></div>","type":"output_format","format":"html"},{"title":"Sample Input","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">2\n4 4 3\n1 1 U\n2 2 L\n3 3 L\n5 5 4\n1 2 R\n3 1 U\n4 3 L\n2 4 D</div></pre>","type":"example","format":"html"},{"title":"Sample Output","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">3\n5</div></pre>","type":"example","format":"html"},{"title":"Source","content":" <a href=\"/search.php?field=problem&amp;key=2019+Multi-University+Training+Contest+9&amp;source=1&amp;searchmode=source\"> 2019 Multi-University Training Contest 9 </a> ","type":"source","format":"html"}]}