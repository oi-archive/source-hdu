{"title":"The Kouga Ninja Scrolls","time_limit":12000,"memory_limit":256,"operation":{"submit":"http://acm.hdu.edu.cn/submit.php?pid=6452","submissions":"http://acm.hdu.edu.cn/status.php?first=&pid=6452&user=&lang=0&status=0","statistics":"http://acm.hdu.edu.cn/statistic.php?pid=6452","discussion":"http://acm.hdu.edu.cn/discuss/problem/list.php?problemid=6452"},"statement":[{"title":"Problem Description","content":"The story centres around $n$ rival ninja clans labelled from $1$ to $n$, and $n$ ninjas also labelled from $1$ to $n$.<br>For each ninja, the family decides his/her initial belief and affiliation of a clan.<br>But some conflicts occur in the story, such as two young souls, facing the rivalry between their ninjas but falling in love, can change their mind and some ninjas may desert to other opposite clans.<br><br>These ninjas are living in a pretty quiet town with straightforward footpaths, but they live like a group of wild animals eyeing up ninjas of other clans, continually escaping and looking forward to killing.<br>The governor of this region knows that the end of the war between them depends on those ninjas belonging to different clans who have the farthest distance.<br><br>That is what a noble vulture as the honest servant of the governor should do.<br>Now you need to act as a vulture, and report in real time to the governor the largest distance between two ninjas that belong to different clans and whose labels are in a specified consecutive range.<br>As a practical matter, the distance between two points in the plane is defined as the Manhattan distance, which is equal to the sum of the absolute differences of their Cartesian coordinates.<br>","type":"description","format":"html","require":["katex"]},{"title":"Input","content":"The story centres around $n$ rival ninja clans labelled from $1$ to $n$, and $n$ ninjas also labelled from $1$ to $n$.<br>For each ninja, the family decides his/her initial belief and affiliation of a clan.<br>But some conflicts occur in the story, such as two young souls, facing the rivalry between their ninjas but falling in love, can change their mind and some ninjas may desert to other opposite clans.<br><br>These ninjas are living in a pretty quiet town with straightforward footpaths, but they live like a group of wild animals eyeing up ninjas of other clans, continually escaping and looking forward to killing.<br>The governor of this region knows that the end of the war between them depends on those ninjas belonging to different clans who have the farthest distance.<br><br>That is what a noble vulture as the honest servant of the governor should do.<br>Now you need to act as a vulture, and report in real time to the governor the largest distance between two ninjas that belong to different clans and whose labels are in a specified consecutive range.<br>As a practical matter, the distance between two points in the plane is defined as the Manhattan distance, which is equal to the sum of the absolute differences of their Cartesian coordinates.<br><br>$1$  $k$ $x$ $y$, the $k$-th ninja changes his/her position along the direction $(x, y)$; that is to say, he/she moves to the new position $(x_0 + x, y_0 + y)$ where $(x_0, y_0)$ is his/her original position.<br>$2$ $k$ $c$, the $k$-th ninja changes his/her mind and decides to work for the $c$-th clan.<br>$3$ $l$ $r$, the governor asks his vulture for ninjas labelled from $l$ to $r$ (inclusive) the largest distance between two of them belonging to different clans.<br><br><br>All $k, x, y, l, r$ and $c$ mentioned in these $m$ lines satisfy $1 \\le k, c \\le n$, $-10^9 \\le x, y \\le 10^9$ and $1 \\le l \\le r \\le n$.<br><br>We guarantee that the sum of $n$ in all test cases is no larger than $5 \\times 10^5$, and the sum of $m$ in all test cases is no larger than $5 \\times 10^5$ as well.<br>","type":"input_format","format":"html","require":["katex"]},{"title":"Output","content":"For each test case, output a line containing &quot;Case #x:&quot; (without quotes) at first, where $x$ is the test case number starting from $1$.<br><br>Then for each inquire, output an integer in a line indicating the answer. If all of the related ninjas belong to the same clan, output $0$ instead.<br>","type":"output_format","format":"html","require":["katex"]},{"title":"Sample Input","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">1\n2 8\n0 0 1\n1 1 2\n3 1 2\n1 1 1 1\n3 1 2\n1 1 1 1\n2 1 2\n3 1 2\n2 1 1\n3 1 2</div></pre>","type":"example","format":"html","require":["katex"]},{"title":"Sample Output","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">Case #1:\n2\n0\n0\n2\n\n<div style=\"font-family:Times New Roman;font-size:14px;background-color:F4FBFF;border:#B7CBFF 1px dashed;padding:6px\"><div style=\"font-family:Arial;font-weight:bold;color:#7CA9ED;border-bottom:#B7CBFF 1px dashed\"><i>Hint</i></div>\nThe Kouga Ninja Scrolls is a historical fantasy novel about ninja written in 1958-1959 by the Japanese author Futaro Yamada.\nThis is the first volume of the Ninja Scrolls series written by Yamada in 1958-2001.\nThe book has been translated into English by Geoff Sant and was published by Del Rey in December 2006.\n\n--from Wikipedia, the free encyclopedia\n\n</div><i style=\"font-size:1px\"> </i></div></pre>","type":"example","format":"html","require":["katex"]},{"title":"Source","content":" <a href=\"/search.php?field=problem&amp;key=The+43rd+ACM+International+Collegiate+Programming+Contest+Asia+Shenyang+Regional+Contest&amp;source=1&amp;searchmode=source\"> The 43rd ACM International Collegiate Programming Contest Asia Shenyang Regional Contest </a> ","type":"source","format":"html","require":["katex"]}]}