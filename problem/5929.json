{"title":"Basic Data Structure","time_limit":3500,"memory_limit":64,"operation":{"submit":"http://acm.hdu.edu.cn/submit.php?pid=5929","submissions":"http://acm.hdu.edu.cn/status.php?first=&pid=5929&user=&lang=0&status=0","statistics":"http://acm.hdu.edu.cn/statistic.php?pid=5929","discussion":"http://acm.hdu.edu.cn/discuss/problem/list.php?problemid=5929"},"statement":[{"title":"Problem Description","content":"Mr. Frog learned a basic data structure recently, which is called stack.There are some basic operations of stack&#xFFFD;&#xFFFD;<br><br>$\\bullet $ PUSH x&#xFFFD;&#xFFFD; put x on the top of the stack, x must be 0 or 1.<br>$\\bullet $ POP&#xFFFD;&#xFFFD; throw the element which is on the top of the stack.<br><br>Since it is too simple for Mr. Frog, a famous mathematician who can prove &quot;Five points coexist with a circle&quot; easily, he comes up with some exciting operations&#xFFFD;&#xFFFD;<br><br>$\\bullet $REVERSE&#xFFFD;&#xFFFD; Just reverse the stack, the bottom element becomes the top element of the stack, and the element just above the bottom element becomes the element just below the top elements... and so on.<br>$\\bullet $QUERY&#xFFFD;&#xFFFD; Print the value which is obtained with such way&#xFFFD;&#xFFFD; Take the element from top to bottom, then do <b>NAND</b> operation one by one from left to right, i.e. If&#xA0;&#xA0;$a_{top},a_{top-1},\\cdots , a_1$ is corresponding to the element of the Stack from top to the bottom, $value = a_{top}$ nand $a_{top-1}$ nand ... nand $a_1$. Note that the Stack <b>will not</b> change after QUERY operation. Specially, if the Stack is empty now&#xFFFD;&#xFFFD;you need to print &#xFFFD;&#xFFFD;<b>Invalid</b>.&#xFFFD;&#xFFFD;(without quotes).<br><br>By the way, <b>NAND</b> is a basic binary operation&#xFFFD;&#xFFFD;<br><br>$\\bullet $ 0 nand 0 = 1<br>$\\bullet $ 0 nand 1 = 1<br>$\\bullet $ 1 nand 0 = 1<br>$\\bullet $ 1 nand 1 = 0<br><br>Because Mr. Frog needs to do some tiny contributions now, you should help him finish this data structure&#xFFFD;&#xFFFD; print the answer to each QUERY, or tell him that is invalid.<br>","type":"description","format":"html"},{"title":"Input","content":"The first line contains only one integer T ($T \\leq 20$), which indicates the number of test cases.<br><br>For each test case, the first line contains only one integers N ($2 \\leq N \\leq 200000$), indicating the number of operations.<br><br>In the following N lines, the i-th line contains one of these operations below&#xFFFD;&#xFFFD;<br><br>$\\bullet $ PUSH x (x <b>must</b> be 0 or 1)<br>$\\bullet $ POP<br>$\\bullet $ REVERSE<br>$\\bullet $ QUERY<br><br>It is guaranteed that the current stack will not be empty while doing POP operation.<br>","type":"input_format","format":"html"},{"title":"Output","content":"For each test case, first output one line &quot;Case #x&#xFFFD;&#xFFFD;w, where x is the case number (starting from 1). Then several lines follow,&#xA0;&#xA0;i-th line contains an integer indicating the answer to the i-th QUERY operation. Specially, if the i-th QUERY is invalid, just print &quot;<b>Invalid.</b>&quot;(without quotes). (Please see the sample for more details.)<br>","type":"output_format","format":"html"},{"title":"Sample Input","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">2\n8\nPUSH 1\nQUERY\nPUSH 0\nREVERSE\nQUERY\nPOP\nPOP\nQUERY\n3\nPUSH 0\nREVERSE\nQUERY</div></pre>","type":"example","format":"html"},{"title":"Sample Output","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">Case #1:\n1\n1\nInvalid.\nCase #2:\n0\n<div style=\"font-family:Times New Roman;font-size:14px;background-color:F4FBFF;border:#B7CBFF 1px dashed;padding:6px\"><div style=\"font-family:Arial;font-weight:bold;color:#7CA9ED;border-bottom:#B7CBFF 1px dashed\"><i>Hint</i></div>\nIn the first sample&#xFFFD;&#xFFFD; during the first query, the stack contains only one element 1, so the answer is 1. then in the second query, the stack contains 0, l\n(from bottom to top), so the answer to the second is also 1. In the third query, there is no element in the stack, so you should output Invalid. \n</div><i style=\"font-size:1px\"> </i></div></pre>","type":"example","format":"html"},{"title":"Source","content":" <a href=\"/search.php?field=problem&amp;key=2016CCPC%B6%AB%B1%B1%B5%D8%C7%F8%B4%F3%D1%A7%C9%FA%B3%CC%D0%F2%C9%E8%BC%C6%BE%BA%C8%FC+-+%D6%D8%CF%D6%C8%FC&amp;source=1&amp;searchmode=source\"> 2016CCPC&#xFFFD;&#xFFFD;&#xFFFD;&#xFFFD;&#xFFFD;&#xFFFD;&#xFFFD;&#xFFFD;&#xFFFD;&#xFFFD;&#x467;&#xFFFD;&#xFFFD;&#xFFFD;&#xFFFD;&#xFFFD;&#xFFFD;&#xFFFD;&#xFFFD;&#x1BE;&#xFFFD;&#xFFFD;&#xFFFD; - &#xFFFD;&#xFFFD;&#xFFFD;&#xFFFD;&#xFFFD;&#xFFFD; </a> ","type":"source","format":"html"}]}