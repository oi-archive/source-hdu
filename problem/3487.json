{"title":"Play with Chain","time_limit":2000,"memory_limit":32,"operation":{"submit":"http://acm.hdu.edu.cn/submit.php?pid=3487","submissions":"http://acm.hdu.edu.cn/status.php?first=&pid=3487&user=&lang=0&status=0","statistics":"http://acm.hdu.edu.cn/statistic.php?pid=3487","discussion":"http://acm.hdu.edu.cn/discuss/problem/list.php?problemid=3487"},"statement":[{"title":"Problem Description","content":"YaoYao is fond of playing his chains. He has a chain containing n diamonds on it. Diamonds are numbered from 1 to n.<br>At first, the diamonds on the chain is a sequence: 1, 2, 3, &#xFFFD;&#xFFFD;, n.<br>He will perform two types of operations:<br>CUT a b c: He will first cut down the chain from the ath diamond to the bth diamond. And then insert it after the cth diamond on the remaining chain.<br>For example, if n=8, the chain is: 1 2 3 4 5 6 7 8; We perform &#xFFFD;&#xFFFD;CUT 3 5 4&#xFFFD;&#xFFFD;, Then we first cut down 3 4 5, and the remaining chain would be: 1 2 6 7 8. Then we insert &#xFFFD;&#xFFFD;3 4 5&#xFFFD;&#xFFFD; into the chain before 5th diamond, the chain turns out to be: 1 2 6 7 3 4 5 8.<br><br>FLIP a b: We first cut down the chain from the ath diamond to the bth diamond. Then reverse the chain and put them back to the original position.<br>For example, if we perform &#xFFFD;&#xFFFD;FLIP 2 6&#xFFFD;&#xFFFD; on the chain: 1 2 6 7 3 4 5 8. The chain will turn out to be: 1 4 3 7 6 2 5 8<br><br>He wants to know what the chain looks like after perform m operations. Could you help him? <br>","type":"description","format":"html"},{"title":"Input","content":"There will be multiple test cases in a test data. <br>For each test case, the first line contains two numbers: n and m (1&#xFFFD;&#xFFFD;n, m&#xFFFD;&#xFFFD;3*100000), indicating the total number of diamonds on the chain and the number of operations respectively.<br>Then m lines follow, each line contains one operation. The command is like this:<br>CUT a b c   // Means a CUT operation, 1 &#xFFFD;&#xFFFD; a &#xFFFD;&#xFFFD; b &#xFFFD;&#xFFFD; n, 0&#xFFFD;&#xFFFD; c &#xFFFD;&#xFFFD; n-(b-a+1).<br>FLIP a b&#xA0;&#xA0;&#xA0;&#xA0;// Means a FLIP operation, 1 &#xFFFD;&#xFFFD; a &lt; b &#xFFFD;&#xFFFD; n.<br>The input ends up with two negative numbers, which should not be processed as a case.<br>","type":"input_format","format":"html"},{"title":"Output","content":"For each test case, you should print a line with n numbers. The ith number is the number of the ith diamond on the chain.","type":"output_format","format":"html"},{"title":"Sample Input","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">8 2\nCUT 3 5 4\nFLIP 2 6\n-1 -1</div></pre>","type":"example","format":"html"},{"title":"Sample Output","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">1 4 3 7 6 2 5 8</div></pre>","type":"example","format":"html"},{"title":"Source","content":" <a href=\"/search.php?field=problem&amp;key=2010+ACM-ICPC+Multi-University+Training+Contest%A3%A85%A3%A9%A1%AA%A1%AAHost+by+BJTU&amp;source=1&amp;searchmode=source\"> 2010 ACM-ICPC Multi-University Training Contest&#xFFFD;&#xFFFD;5&#xFFFD;&#xFFFD;&#xFFFD;&#xFFFD;&#xFFFD;&#xFFFD;Host by BJTU </a> ","type":"source","format":"html"}]}