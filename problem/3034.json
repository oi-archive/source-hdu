{"title":"Board Game","time_limit":3000,"memory_limit":32,"operation":{"submit":"http://acm.hdu.edu.cn/submit.php?pid=3034","submissions":"http://acm.hdu.edu.cn/status.php?first=&pid=3034&user=&lang=0&status=0","statistics":"http://acm.hdu.edu.cn/statistic.php?pid=3034","discussion":"http://acm.hdu.edu.cn/discuss/problem/list.php?problemid=3034"},"statement":[{"title":"Problem Description","content":"Jerry developed a new board game recently. The board consists of N*N grids and M pieces have been randomly put in these grids. The game rules are defined as follows.<br><br>1. There is a unique grid defined as exit-grid.<br><br>2. In the initial state, no pieces is in exit-grid, and all the pieces are not adjacent to each other(in four directions: up, down, left, right).<br><br>3. All the M pieces are marked from 1 to M .<br><br>4. Each time you are allowed to move one piece to one of its adjacent blocks, which is counted as one step.<br><br>5. When you move the pieces, make sure that all the pieces are not adjacent to each other.<br><br>6. When the smallest piece, i.e. its marked number is the smallest on the board, is moved to exit-grid, you can take that piece away from the board. Pieces other than the smallest one are also allowed to move to exit-grid but they cannot be taken away.<br><br>7. When all the pieces on the board have been taken away, you win the game.<br><br>Tom is a very evil person. Every time Jerry playing the board game, he always says he has a better way to win the game, but he is not willing to tell Jerry. Jerry does not know whether Tom&apos;s words are true or not, so he asks for your help to write a program that can count the number of fewest steps to win the board game.","type":"description","format":"html","require":["katex"]},{"title":"Input","content":"To simplify the problem, now we limit 2&lt;=N&lt;=6, 1&lt;=M&lt;=4 and all the initial states are correct.<br><br>The first line of the input contains a positive integer T(T &lt;= 200), which indicate the number of test cases.<br><br>Then follows T cases of inputs:<br>- a positive integer N<br>- a positive integer M<br>- a N*N matrix of characters to indicate the initial state of the board<br>If the element in the matrix is &apos;o&apos;, it means there is no piece in that grid; otherwise, the element is the marked number of that piece. Note that the element of exit-grid is &apos;x&apos;.","type":"input_format","format":"html","require":["katex"]},{"title":"Output","content":"For each test case, output one line with the number of fewest steps needed to win the game, or &quot;-1&quot; if it is impossible to accomplish that game.","type":"output_format","format":"html","require":["katex"]},{"title":"Sample Input","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">2\n3 2\nx2o\nooo\noo1\n\n3 3\nxo1\no2o\n3oo</div></pre>","type":"example","format":"html","require":["katex"]},{"title":"Sample Output","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">7\n-1</div></pre>","type":"example","format":"html","require":["katex"]},{"title":"Source","content":" <a href=\"/search.php?field=problem&amp;key=2009+Multi-University+Training+Contest+13+-+Host+by+HIT&amp;source=1&amp;searchmode=source\"> 2009 Multi-University Training Contest 13 - Host by HIT </a> ","type":"source","format":"html","require":["katex"]}]}