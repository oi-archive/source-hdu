{"title":"Shoot Your Gun!","time_limit":2000,"memory_limit":32,"operation":{"submit":"http://acm.hdu.edu.cn/submit.php?pid=2981","submissions":"http://acm.hdu.edu.cn/status.php?first=&pid=2981&user=&lang=0&status=0","statistics":"http://acm.hdu.edu.cn/statistic.php?pid=2981","discussion":"http://acm.hdu.edu.cn/discuss/problem/list.php?problemid=2981"},"statement":[{"title":"Problem Description","content":"There are two rectangular polygons (simple polygons with interior angles of only 90 or 270 degrees) G  and T , inside another rectangular polygon M . You can place a gun anywhere on the boundary of G , then shoot a bullet in one of four diagonal directions, and then touch the boundary of T . You may shoot across an edge of T , but touching only a corner is also allowed. Your bullet is not allowed to touch G  again (even touching a corner of G  is not allowed), before touching T .<br><br><center><img style=\"max-width:100%;\" src=\"../../../data/images/con216-1007-1.JPG\"></center><br><br>The edges of M can reflect the bullet. When the bullet touches a vertex of M , it may simply go through it (and not regarded as a reflection), or go back. These special cases are shown in the figure above.<br><br>Write a program to find the minimal number of reflections needed from G to T . ","type":"description","format":"html","require":["katex"]},{"title":"Input","content":"The input contains several test cases. The first line of each case contains three positive integers nG, nT, nM  (4&lt;=nG, nT, nM&lt;=50) . The next line contains nG  pairs of integers, the coordinates (non-negative integers not greater than 4000) of the vertices of G , in counter-clockwise order. The next two lines describe polygon T  and M , in the same format. It is guaranteed that G  and T  are outside each other (their boundaries will not touch), and are both inside M  (they do not touch the boundary of M ). The last test case is followed by a single zero, which should not be processed. ","type":"input_format","format":"html","require":["katex"]},{"title":"Output","content":"For each test case, print the case number and the minimal number of reflections to touch T . If it&apos;s impossible, output `-1&apos;. ","type":"output_format","format":"html","require":["katex"]},{"title":"Sample Input","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">4 4 12 \n1 4 2 4 2 5 1 5 \n6 4 7 4 7 5 6 5 \n0 3 3 3 3 0 4 0 4 3 8 3 8 6 4 6 4 5 3 5 3 7 0 7 \n4 4 4 \n1 1 2 1 2 2 1 2 \n3 1 4 1 4 2 3 2 \n0 0 5 0 5 3 0 3 \n4 4 4 \n1 1 2 1 2 2 1 2 \n6 1 7 1 7 2 6 2  \n0 0 8 0 8 3 0 3\n0</div></pre>","type":"example","format":"html","require":["katex"]},{"title":"Sample Output","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">Case 1: 2 \nCase 2: 0 \nCase 3: 1</div></pre>","type":"example","format":"html","require":["katex"]},{"title":"Source","content":" <a href=\"/search.php?field=problem&amp;key=2007+Asia+Regional+Beijing+&amp;source=1&amp;searchmode=source\"> 2007 Asia Regional Beijing  </a> ","type":"source","format":"html","require":["katex"]}]}