{"title":"Intersection of Prisms","time_limit":7000,"memory_limit":512,"operation":{"submit":"http://acm.hdu.edu.cn/submit.php?pid=6654","submissions":"http://acm.hdu.edu.cn/status.php?first=&pid=6654&user=&lang=0&status=0","statistics":"http://acm.hdu.edu.cn/statistic.php?pid=6654","discussion":"http://acm.hdu.edu.cn/discuss/problem/list.php?problemid=6654"},"statement":[{"title":"Problem Description","content":"Cuber QQ used to encounter such a problem: find the intersection of two infinitely long convex right prisms $A$ and $B$. Actually this problem is also on HDU Online Judge, you can solve it afterwards if you are interested.<br><br>Cuber QQ quickly solved it, and thought it too easy because his program can handle more than that. So he modify it a little bit, by removing the constraints of ``convex&apos;&apos;, that is, the cross-section of these two prisms are not necessarily convex, but they are still simple.<br><br>Formally, you have to find the volume of intersection of two prisms, whose cross-sections are both simple polygons. All joining edges of $A$ are parallel to the $z$-axis, and all joining edges of $B$ are parallel to the $x$-axis. If A and B do not intersect, the answer is $0$ of course.<br>","type":"description","format":"html","require":["katex"]},{"title":"Input","content":"The first line is an integer $t$, denoting the number of test cases follows.<br><br>For each test case, there are two polygons, the base polygon of $A$ and $B$ respectively.<br><br>An integer $n$ ($3 \\le n \\le 10^5$) followed by $n$ lines, each containing two space-separated integers $(x, y)$ ($-10^6 \\le x, y \\le 10^6$), is the representation of the base polygon of $A$. The following $m+1$ ($3 \\le m \\le 10^5$) gives a similar representation for $B$, except that the coordinates given are $(y, z)$ ($-10^6 \\le x, y \\le 10^6$).<br><br>Each polygon are given in either clockwise or counterclockwise order. Following the convention, polygon $P$ is simple, if no two edges have any points in common, with the obvious exception of two consecutive segments having one common point.<br><br>The sum of $m+n$ from all test cases does not exceed $2 \\cdot 10^6$.","type":"input_format","format":"html","require":["katex"]},{"title":"Output","content":"For each test case, output the answer modulo $10^9+7$, that is, if the answer is $\\frac{P}{Q}$, you should output $P \\cdot Q^{-1}$ modulo $10^9+7$, where $Q^{-1}$ denotes the multiplicative inverse of $Q$ modulo $10^9+7$.<br>","type":"output_format","format":"html","require":["katex"]},{"title":"Sample Input","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">1\n4\n10 0\n0 10\n-10 0\n0 -10\n3\n5 0\n-15 -10\n-15 10</div></pre>","type":"example","format":"html","require":["katex"]},{"title":"Sample Output","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">666667713\n\n<div style=\"font-family:Times New Roman;font-size:14px;background-color:F4FBFF;border:#B7CBFF 1px dashed;padding:6px\"><div style=\"font-family:Arial;font-weight:bold;color:#7CA9ED;border-bottom:#B7CBFF 1px dashed\"><i>Hint</i></div>\nThe intersection of the sample input is 3125/3.\n\nPrisms before intersection:\n\n\n<center><img src=\"../../../data/images/C755-1009-1.jpg\"></center> \n\nThe intersection part looks like this:\n\n<center><img src=\"../../../data/images/C755-1009-2.jpg\"></center>\n\nThe input size is quite large. Please mind the efficiency of your input buffer.\n</div><i style=\"font-size:1px\"> </i></div></pre>","type":"example","format":"html","require":["katex"]},{"title":"Source","content":" <a href=\"/search.php?field=problem&amp;key=2019+Multi-University+Training+Contest+7&amp;source=1&amp;searchmode=source\"> 2019 Multi-University Training Contest 7 </a> ","type":"source","format":"html","require":["katex"]}]}