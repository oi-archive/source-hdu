{"title":"To the moon","time_limit":2000,"memory_limit":64,"operation":{"submit":"http://acm.hdu.edu.cn/submit.php?pid=4348","submissions":"http://acm.hdu.edu.cn/status.php?first=&pid=4348&user=&lang=0&status=0","statistics":"http://acm.hdu.edu.cn/statistic.php?pid=4348","discussion":"http://acm.hdu.edu.cn/discuss/problem/list.php?problemid=4348"},"statement":[{"title":"Problem Description","content":"<strong>Background</strong><br>To The Moon is a independent game released in November 2011, it is a role-playing adventure game powered by RPG Maker.<br>The premise of To The Moon is based around a technology that allows us to permanently reconstruct the memory on dying man. In this problem, we&apos;ll give you a chance, to implement the logic behind the scene.<br><br>You&#x2018;ve been given N integers A<sub>[1]</sub>, A<sub>[2]</sub>,..., A<sub>[N]</sub>. On these integers, you need to implement the following operations:<br><strong>1.</strong>  C l r d: Adding a constant d for every {A<sub>i</sub> | l &lt;= i &lt;= r}, and increase the time stamp by 1, this is the only operation that will cause the time stamp increase. <br><strong>2.</strong>  Q l r: Querying the current sum of {A<sub>i</sub> | l &lt;= i &lt;= r}.<br><strong>3.</strong>  H l r t: Querying a history sum of {A<sub>i</sub> | l &lt;= i &lt;= r} in time t.<br><strong>4.</strong>  B t: Back to time t. And once you decide return to a past, you can never be access to a forward edition anymore.<br> .. N, M &#x2264; 10<sup>5</sup>, |A<sub>[i]</sub>| &#x2264; 10<sup>9</sup>, 1 &#x2264; l &#x2264; r &#x2264; N, |d| &#x2264; 10<sup>4</sup> .. the system start from time 0, and the first modification is in time 1, t &#x2265; 0, and won&apos;t introduce you to a future state. ","type":"description","format":"html"},{"title":"Input","content":"n m<br>A<sub>1</sub> A<sub>2</sub> ... A<sub>n</sub><br>... (here following the m operations. )","type":"input_format","format":"html"},{"title":"Output","content":"... (for each query, simply print the result. )","type":"output_format","format":"html"},{"title":"Sample Input","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">10 5\n1 2 3 4 5 6 7 8 9 10\nQ 4 4\nQ 1 10\nQ 2 4\nC 3 6 3\nQ 2 4\n\n2 4\n0 0\nC 1 1 1\nC 2 2 -1\nQ 1 2\nH 1 2 1</div></pre>","type":"example","format":"html"},{"title":"Sample Output","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">4\n55\n9\n15\n\n0\n1</div></pre>","type":"example","format":"html"},{"title":"Author","content":"HIT","type":"source","format":"html"},{"title":"Source","content":" <a href=\"/search.php?field=problem&amp;key=2012+Multi-University+Training+Contest+5&amp;source=1&amp;searchmode=source\"> 2012 Multi-University Training Contest 5 </a> ","type":"source","format":"html"}]}