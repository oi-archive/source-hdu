{"title":"Obfuscation","time_limit":1000,"memory_limit":64,"operation":{"submit":"http://acm.hdu.edu.cn/submit.php?pid=2340","submissions":"http://acm.hdu.edu.cn/status.php?first=&pid=2340&user=&lang=0&status=0","statistics":"http://acm.hdu.edu.cn/statistic.php?pid=2340","discussion":"http://acm.hdu.edu.cn/discuss/problem/list.php?problemid=2340"},"statement":[{"title":"Problem Description","content":"It is a well-known fact that if you mix up the letters of a word, while leaving the first and last letters in their places, words still remain readable. For example, the sentence &#x201C;tihs snetncee mkaes prfecet sesne&#x201D;, makes perfect sense to most people.<br><br>If you remove all spaces from a sentence, it still remains perfectly readable, see for example: &#x201C;thissentencemakesperfectsense&#x201D;, however if you combine these two things, first shuffling, then removing spaces, things get hard. The following sentence is harder to decipher: &#x201C;tihssnetnceemkaesprfecetsesne&#x201D;.<br><br>You&#x2019;re given a sentence in the last form, together with a dictionary of valid words and are asked to decipher the text.<br><br>","type":"description","format":"html"},{"title":"Input","content":"On the first line one positive number: the number of testcases, at most 100. After that per testcase:<br><br>One line with a string s: the sentence to decipher. The sentence consists of lowercase letters and has a length of at least 1 and at most 1 000 characters.<br><br>One line with an integer n with 1 &#x2264; n &#x2264; 10 000: the number of words in the dictionary.<br><br>n lines with one word each. A word consists of lowercase letters and has a length of at least 1 and at most 100 characters. All the words are unique.<br>","type":"input_format","format":"html"},{"title":"Output","content":"Per testcase:<br><br>One line with the deciphered sentence, if it is possible to uniquely decipher it. Otherwise &#x201C;impossible&#x201D; or &#x201C;ambiguous&#x201D;, depending on which is the case.","type":"output_format","format":"html"},{"title":"Sample Input","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">3\ntihssnetnceemkaesprfecetsesne\n5\nmakes\nperfect\nsense\nsentence\nthis\nhitehre\n2\nthere\nhello\nhitehre\n3\nhi\nthere\nthree</div></pre>","type":"example","format":"html"},{"title":"Sample Output","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">this sentence makes perfect sense\nimpossible\nambiguous</div></pre>","type":"example","format":"html"},{"title":"Source","content":" <a href=\"/search.php?field=problem&amp;key=Northwestern+Europe+2007&amp;source=1&amp;searchmode=source\"> Northwestern Europe 2007 </a> ","type":"source","format":"html"}]}