{"title":"Build Towers","time_limit":2000,"memory_limit":120.5625,"operation":{"submit":"http://acm.hdu.edu.cn/submit.php?pid=5541","submissions":"http://acm.hdu.edu.cn/status.php?first=&pid=5541&user=&lang=0&status=0","statistics":"http://acm.hdu.edu.cn/statistic.php?pid=5541","discussion":"http://acm.hdu.edu.cn/discuss/problem/list.php?problemid=5541"},"statement":[{"title":"Problem Description","content":"Build towers on a game board is very interesting. Here we introduce one kind of game which is also building towers on the game board.<br><br> <center><img style=\"max-width:100%;\" src=\"../../data/images/5541-1.jpg\"></center><br><br>There are $n$  sticks on the game board. At the beginning of the game, we put plates of different colors on the sticks. There are $n-2$  different colors of plates. For each color, there are plates of size $0 , 1 , 2 , 3 , 4 , 5 , 6$ . One for each size. So totally there are $7(n-2)$  plates put on the sticks.<br><br>If a plate of size $x$  is put right above the plate of size $x+1$  of the same color, they are glued together and not able to be split any more. In other words, they must be moved together in the rest of the game.<br><br>For each move, we can only move the top plate of each stick, maybe it&apos;s glued with several other plates, so they will be moved together. We can only move them onto a stick that the top plate is in the same color with the moving one and is larger than the moving plates. Or we can move them onto an empty stick.<br><br>The goal of this game is to make $n-2$  towers on any of the $n-2$  different sticks. Each of them are made of $7$  plates in the order of $0 , 1 , 2 , 3 , 4 , 5 , 6$  from top to bottom.<br><br>Now you need to find the minimal number of moved to achieve this.<br>","type":"description","format":"html"},{"title":"Input","content":"The first line of the input gives the number of test cases, $T (1&#xFFFD;&#xFFFD;T&#xFFFD;&#xFFFD;20 )$. $T$  test cases follow. Each test case starts with number $n (n=8 )$, the number of sticks on the game board. Each of the next $n$  lines starts with a number $P_{i}  (1&#xFFFD;&#xFFFD;P_{i} &#xFFFD;&#xFFFD;6 )$ represents the number of plates set on each stick. $P_{i}$ strings follow, each represents a plate set on that stick from bottom to top. The first character of the string represents the color and the rest represents the size or size range.<br><br>It&apos;s guaranteed that the number of colors equals $n-2$  and there are $7$  different plates for each color, $0$  to $6$ .<br><br>It&apos;s also guaranteed that there exists at least one solution for each test case<br>","type":"input_format","format":"html"},{"title":"Output","content":"For each test case, output one line containing <b>Case #x: y</b>, where $x$  is the test case number (starting from $1$ ) and $y$  is the minimal number of moves to make $n-2$  complete towers.","type":"output_format","format":"html"},{"title":"Sample Input","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">1\n8\n6 A0 B0 E1 C0 C5 F3\n6 F6 D0 B4 E0 D6 C2\n5 F0 B3 E5 C1 B5\n5 D5 B1 E6 B2 A5\n5 F1 A4 F4 D3 B6\n5 A6 D2 E4 D1 C4\n4 A1 E2-3 D4 A2\n5 A3 C6 F5 C3 F2</div></pre>","type":"example","format":"html"},{"title":"Sample Output","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">Case #1: 47</div></pre>","type":"example","format":"html"},{"title":"Source","content":" <a href=\"/search.php?field=problem&amp;key=The+2015+China+Collegiate+Programming+Contest&amp;source=1&amp;searchmode=source\"> The 2015 China Collegiate Programming Contest </a> ","type":"source","format":"html"}]}