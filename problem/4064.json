{"title":"Carcassonne","time_limit":1000,"memory_limit":32,"operation":{"submit":"http://acm.hdu.edu.cn/submit.php?pid=4064","submissions":"http://acm.hdu.edu.cn/status.php?first=&pid=4064&user=&lang=0&status=0","statistics":"http://acm.hdu.edu.cn/statistic.php?pid=4064","discussion":"http://acm.hdu.edu.cn/discuss/problem/list.php?problemid=4064"},"statement":[{"title":"Problem Description","content":"<a href=\"http://en.wikipedia.org/wiki/Carcassonne_%28board_game%29\">Carcassonne</a> is a tile-based board game for two to five players.<br>Square tiles are printed by city segments,road segments and field segments. <br><center><img style=\"max-width:100%;\" src=\"../../data/images/C348-1004-1.jpg\"></center> <br>The rule of the game is to put the tiles alternately. Two tiles share one edge should exactly connect to each other, that is, city segments should be linked to city segments, road to road, and field to field.   <br><center><img style=\"max-width:100%;\" src=\"../../data/images/C348-1004-2.jpg\"></center> <br>To simplify the problem, we only consider putting tiles:<br>Given n*m tiles. You can rotate each tile, but not flip top to bottom, and not change their order. <br>How many ways could you rotate them to make them follow the rules mentioned above?","type":"description","format":"html","require":["katex"]},{"title":"Input","content":"The first line is a number T(1&lt;=T&lt;=50), represents the number of case. The next T blocks follow each indicates a case.<br>Each case starts with two number N,M(0&lt;N,M&lt;=12)<br>Then N*M lines follow,each line contains M four-character clockwise.<br>&apos;C&apos; indicate City.<br>&apos;R&apos; indicate Road.<br>&apos;F&apos; indicate Field.","type":"input_format","format":"html","require":["katex"]},{"title":"Output","content":"For each case, output the number of ways mod 1,000,000,007.(as shown in the sample output)<br>","type":"output_format","format":"html","require":["katex"]},{"title":"Sample Input","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">3\n1 1\nRRRR\n1 2\nRRRF FCCC\n8 8\nFCFF RRFC FRCR FRFR RCCR FFCC RRFF CRFR\nFRRC FRFR CCCR FCFC CRRC CRRR FRCR FRFR\nRRCR FRRR CCCR FFFC RRFF RFCR CCFF FCCC\nCFCF RRFF CRFR FFRR FRRF CCRR FFFC CRRF\nCFRR FFFF FFFF RRFF RRRR RCRR FFCC RFRF\nRRCF FRFR FRRR FRFR RCCR RCCC CFFC RFRF\nCFCF FRFF RRFF FFFF CFFF CFFF FRFF RFRR\nCCRR FCFC FCCC FCCC FFCC FCCF FFCC RFRF</div></pre>","type":"example","format":"html","require":["katex"]},{"title":"Sample Output","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">Case 1: 4\nCase 2: 1\nCase 3: 1048576</div></pre>","type":"example","format":"html","require":["katex"]},{"title":"Source","content":" <a href=\"/search.php?field=problem&amp;key=The+36th+ACM%2FICPC+Asia+Regional+Fuzhou+Site+%A1%AA%A1%AA+Online+Contest&amp;source=1&amp;searchmode=source\"> The 36th ACM/ICPC Asia Regional Fuzhou Site &#x2014;&#x2014; Online Contest </a> ","type":"source","format":"html","require":["katex"]}]}