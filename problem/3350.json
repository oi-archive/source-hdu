{"title":"#define is unsafe","time_limit":1000,"memory_limit":32,"operation":{"submit":"http://acm.hdu.edu.cn/submit.php?pid=3350","submissions":"http://acm.hdu.edu.cn/status.php?first=&pid=3350&user=&lang=0&status=0","statistics":"http://acm.hdu.edu.cn/statistic.php?pid=3350","discussion":"http://acm.hdu.edu.cn/discuss/problem/list.php?problemid=3350"},"statement":[{"title":"Problem Description","content":"Have you used #define in C/C++ code like the code below?<br><br>#include &lt;stdio.h&gt;<br>#define MAX(a , b) ((a) &gt; (b) ? (a) : (b))<br>int main()<br>{<br>&#xA0;&#xA0;printf(&quot;%d\\n&quot; , MAX(2 + 3 , 4));<br>&#xA0;&#xA0;return 0;<br>}<br><br>Run the code and get an output: 5, right?<br>You may think it is equal to this code:<br><br>#include &lt;stdio.h&gt;<br>int max(a , b) {&#xA0;&#xA0;return ((a) &gt; (b) ? (a) : (b));&#xA0;&#xA0;}<br>int main()<br>{<br>&#xA0;&#xA0;printf(&quot;%d\\n&quot; , max(2 + 3 , 4));<br>&#xA0;&#xA0;return 0;<br>}<br><br>But they aren&apos;t.Though they do produce the same anwser , they work in two different ways.<br>The first code, just replace the MAX(2 + 3 , 4) with ((2 + 3) &gt; (4) ? (2 + 3) : 4), which calculates (2 + 3) twice.<br>While the second calculates (2 + 3) first, and send the value (5 , 4) to function max(a , b) , which calculates (2 + 3) only once.<br><br>What about MAX( MAX(1+2,2) , 3 ) ? <br>Remember &quot;replace&quot;.<br>First replace: MAX( (1 + 2) &gt; 2 ? (1 + 2) : 2 , 3)<br>Second replace: ( ( ( 1 + 2 ) &gt; 2 ? ( 1 + 2 ) : 2 ) &gt; 3 ? ( ( 1 + 2 ) &gt; 2 ? ( 1 + 2 ) : 2 ) : 3).<br>The code may calculate the same expression many times like ( 1 + 2 ) above.<br>So #define isn&apos;t good.In this problem,I&apos;ll give you some strings, tell me the result and how many additions(&#x52A0;&#x6CD5;) are computed.<br>","type":"description","format":"html"},{"title":"Input","content":"The first line is an integer T(T&lt;=40) indicating case number.<br>The next T lines each has a string(no longer than 1000), with MAX(a,b), digits, &apos;+&apos; only(Yes, there&apos;re no other characters).<br>In MAX(a,b), a and b may be a string with MAX(c,d), digits, &apos;+&apos;.See the sample and things will be clearer.<br>","type":"input_format","format":"html"},{"title":"Output","content":"For each case, output two integers in a line separated by a single space.Integers in output won&apos;t exceed 1000000.","type":"output_format","format":"html"},{"title":"Sample Input","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">6\nMAX(1,0)\n1+MAX(1,0)\nMAX(2+1,3)\nMAX(4,2+2)\nMAX(1+1,2)+MAX(2,3)\nMAX(MAX(1+2,3),MAX(4+5+6,MAX(7+8,9)))+MAX(10,MAX(MAX(11,12),13))</div></pre>","type":"example","format":"html"},{"title":"Sample Output","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">1 0\n2 1\n3 1\n4 2\n5 2\n28 14</div></pre>","type":"example","format":"html"},{"title":"Author","content":"madfrog","type":"source","format":"html"},{"title":"Source","content":" <a href=\"/search.php?field=problem&amp;key=HDU2010%CA%A1%C8%FC%BC%AF%D1%B5%B6%D3%D1%A1%B0%CE%C8%FC%A3%A8%D0%A3%C4%DA%C8%FC%A3%A9&amp;source=1&amp;searchmode=source\"> HDU2010&#x7701;&#x8D5B;&#x96C6;&#x8BAD;&#x961F;&#x9009;&#x62D4;&#x8D5B;&#xFF08;&#x6821;&#x5185;&#x8D5B;&#xFF09; </a> ","type":"source","format":"html"}]}