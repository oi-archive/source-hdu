{"title":"Another Version of the Truth","time_limit":3000,"memory_limit":32,"operation":{"submit":"http://acm.hdu.edu.cn/submit.php?pid=2358","submissions":"http://acm.hdu.edu.cn/status.php?first=&pid=2358&user=&lang=0&status=0","statistics":"http://acm.hdu.edu.cn/statistic.php?pid=2358","discussion":"http://acm.hdu.edu.cn/discuss/problem/list.php?problemid=2358"},"statement":[{"title":"Problem Description","content":"Influence is a board game; while it can be played on almost any layout, an interesting layout is a hexagonal NxN grid, such that the layout resembles<br>a rhombus.<br><br>An example 9x9 board is as follows:<br><pre><br>1 2 3 4 5 6 7 8 9<br> \\ \\ \\ \\ \\ \\ \\ \\ \\<br>  * * * * * * * * * &#x2014; A<br>   * * * * * * * * * &#x2014; B<br>    * * * * * * * * * &#x2014; C<br>     * * * * * * * * * &#x2014; D<br>      * * * * * * * * * &#x2014; E<br>       * * * * * * * * * &#x2014; F<br>        * * * * * * * * * &#x2014; G<br>         * * * * * * * * * &#x2014; H<br>          * * * * * * * * * &#x2014; I<br></pre><br>On the above grid, F5 is adjacent to F4, F6, E5, E6, G4, and G5. (These coordinates are not used in the problem, but are useful for understanding the<br>underlying adjacencies.)<br><br>The rules of Influence are simple; the pertinent details are as follows:<br><br>Players take turns placing Manipulators on the board. Manipulators occupy a single location, and there may be at most one Manipulator at a<br>location. If there is no empty location on the board to place a piece, the player must pass their turn.<br>Each player has a certain amount of Influence. A player has a single point of Influence for every location on the board that is strictly closer to<br>one of their Manipulators than a Manipulator of any other player. This is not &quot;straight-line&quot; distance, but the number of cells in a minimal path<br>to a Manipulator. On the above grid, the cell F5 is 2 steps away from G6, 1 step away from G5, and 0 steps away from itself.<br>The player with the most Influence at the end of the game wins.<br><br>In the sample input below, the first player (represented by &quot;!&quot; marks) has only two Influence, that provided by the locations that his Manipulators are<br>on; the second player (represented by &quot;@&quot; signs) has ten Influence, and the third player (represented by &quot;#&quot; marks) has four Influence. There are<br>nine locations that provide Influence to no player, as they are equally distant from two or more of the players.<br><br>Given a particular board layout, answer this question: what would the resulting Influence be for each player&apos;s optimal move if they were making the<br>last move in the game?<br><br>Moves are to be considered independently; that is, the maximum score for the second player should be calculated based on the original board layout,<br>not the one after the first player&apos;s best move.","type":"description","format":"html","require":["katex"]},{"title":"Input","content":"Input to this problem will begin with a line containing a single integer N (1 &#x2264; N &#x2264; 100) indicating the number of data sets. Each data set consists of<br>the following components:<br><br>A line containing a single integer P (2 &#x2264; P &#x2264; 4) indicating the number of players in the game;<br>A line containing a single integer D (1 &#x2264; D &#x2264; 26) indicating the board&apos;s dimension (9 would represent the 9x9 board above); and<br>A series of D lines, each representing a row on the board from top to bottom. Each location on the row is represented by one of the following<br>characters, separated by spaces:<br>. &#x2014; An empty location;<br>! &#x2014; A piece for the first player;<br>@ &#x2014; A piece for the second player;<br># &#x2014; A piece for the third player (if playing); or<br>$ &#x2014; A piece for the fourth player (if playing).<br>Note that there may be extra whitespace on these lines (and only these lines). This is to make the input resemble the layout shown above.","type":"input_format","format":"html","require":["katex"]},{"title":"Output","content":"For each data set in the input, output the heading &quot;DATA SET #K&quot; where K is 1 for the first data set, 2 for the second, etc. Then print P lines, each<br>representing the maximum score possible for, in order, the first, second, third (if playing), and fourth (if playing) player if they were to make a single<br>last move.","type":"output_format","format":"html","require":["katex"]},{"title":"Sample Input","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">1\n3\n5\n! . . # .\n . @ . . !\n  . . . . #\n   . . @ . .\n    . . . . .</div></pre>","type":"example","format":"html","require":["katex"]},{"title":"Sample Output","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">DATA SET #1\n5\n13\n7</div></pre>","type":"example","format":"html","require":["katex"]},{"title":"Source","content":" <a href=\"/search.php?field=problem&amp;key=HDU+2008%278+%B9%AB%BF%AA%C8%FC%A3%A8%B7%C7%D4%AD%B4%B4%A3%A9&amp;source=1&amp;searchmode=source\"> HDU 2008&apos;8 &#x516C;&#x5F00;&#x8D5B;&#xFF08;&#x975E;&#x539F;&#x521B;&#xFF09; </a> ","type":"source","format":"html","require":["katex"]}]}