{"title":"Moveable maze","time_limit":1000,"memory_limit":32,"operation":{"submit":"http://acm.hdu.edu.cn/submit.php?pid=2496","submissions":"http://acm.hdu.edu.cn/status.php?first=&pid=2496&user=&lang=0&status=0","statistics":"http://acm.hdu.edu.cn/statistic.php?pid=2496","discussion":"http://acm.hdu.edu.cn/discuss/problem/list.php?problemid=2496"},"statement":[{"title":"Problem Description","content":"After solving a difficult programming problem, you decide to take a break and play a puzzle game. After playing the game for a while, you decide to write a program to solve it for you. <br><br>The game is played on a grid with <i>R</i> rows and <i>C</i> columns. Each square of the grid contains a black dot in the centre and black lines in the direction of some, none, or all of its north, east, south, and west neighbouring squares. Your objective in this game is to move your playing piece from the centre of the square in the <i>i<sub>1</sub></i><sup>th</sup> row and the <i>j<sub>1</sub></i><sup>th</sup> column, where it begins, to the centre of the square in the the <i>i<sub>2</sub></i><sup>th</sup> row and the <i>j<sub>2</sub></i><sup>th</sup> column. <br><br>You wish to do this in the least number of turns possible, where a turn consists of the following two parts. First in each turn, you may opt to select any grid square and rotate it 90 degrees clockwise or counterclockwise. Second in each turn, you may opt to move your piece from the centre of its current grid square to the centre of a neighbouring grid square, provided your piece does not leave the black markings. In other words, you may move from a square A to a neighbouring square B if A has a black line in the direction of B and B has a black line in the direction of A. Note that either part of a turn may be omitted.","type":"description","format":"html"},{"title":"Input","content":"Input consists of a number of test cases. The first line of each test case contains the two integers <i>R</i> and <i>C</i>, separated by spaces, with 1 &lt;= <i>R, C</i> &lt;= 20. <br><br>The next line contains the integers <i>i<sub>1</sub>, j<sub>1</sub>, i<sub>2</sub>, j<sub>2</sub></i>, separated by spaces, with 1 &lt;= <i>i<sub>1</sub>, i<sub>2</sub></i> &lt;= <i>R</i> and 1 &lt;= <i>j<sub>1</sub>, j<sub>2</sub></i> &lt;= <i>C</i>.<br><br>The following <i>R</i> lines of input each contain one row of the grid, from north to south. Each of these lines contains exactly <i>C</i> strings of letters, separated by spaces, that correspond to squares of the grid, from west to east. Their format is as follows: <br><ul><li>If the string is the single character x, then the square does not contain a line to any of its neighbours. </li><br><li>Otherwise, the string contains some of the characters N, E, S, W, which indicate that a black line extends from this square&apos;s centre in the direction of its north, east, south, or west neighbour, respectively. No character will appear in the string more than once.</li></ul>It is guaranteed that it is possible to move your playing piece from (<i>i<sub>1</sub>, j<sub>1</sub></i>) to (<i>i<sub>2</sub>, j<sub>2</sub></i>). <br><br>Input is terminated by a line containing 0 0. These zeros are not a test case and should not be processed.","type":"input_format","format":"html"},{"title":"Output","content":"Output consists of exactly one line for each test case. The lines contains an integer: the minimum number of turns to move your playing piece from (<i>i<sub>1</sub>, j<sub>1</sub></i>) to (<i>i<sub>2</sub>, j<sub>2</sub></i>). <br>","type":"output_format","format":"html"},{"title":"Sample Input","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">4 2\n1 1 4 1\nE SW\nx EW\nNW ES\nN x\n0 0\n\n<div style=\"font-family:Times New Roman;font-size:14px;background-color:F4FBFF;border:#B7CBFF 1px dashed;padding:6px\"><div style=\"font-family:Arial;font-weight:bold;color:#7CA9ED;border-bottom:#B7CBFF 1px dashed\"><i>Hint</i></div>A diagram of the input:\n\n<img src=\"../../../data/images/C240-1002-1.jpg\">\n</div><i style=\"font-size:1px\"> </i></div></pre>","type":"example","format":"html"},{"title":"Sample Output","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">5\n\n<div style=\"font-family:Times New Roman;font-size:14px;background-color:F4FBFF;border:#B7CBFF 1px dashed;padding:6px\"><div style=\"font-family:Arial;font-weight:bold;color:#7CA9ED;border-bottom:#B7CBFF 1px dashed\"><i>Hint</i></div>\nAn example optimal solution is: \n\n1. Rotate (2,2) clockwise. Step to (1,2). \n2. Rotate (3,2) counterclockwise. Step to (2,2). \n3. Rotate (3,2) counterclockwise. Step to (3,2).\n4. Rotate (3,1) clockwise. Step to (3,1).\n5. Rotate (3,1) clockwise. Step to (4,1).</div><i style=\"font-size:1px\"> </i></div></pre>","type":"example","format":"html"},{"title":"Source","content":" <a href=\"/search.php?field=problem&amp;key=University+of+Waterloo+Local+Contest+2009.09&amp;source=1&amp;searchmode=source\"> University of Waterloo Local Contest 2009.09 </a> ","type":"source","format":"html"}]}