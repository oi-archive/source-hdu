{"title":"Escape","time_limit":1000,"memory_limit":32,"operation":{"submit":"http://acm.hdu.edu.cn/submit.php?pid=2364","submissions":"http://acm.hdu.edu.cn/status.php?first=&pid=2364&user=&lang=0&status=0","statistics":"http://acm.hdu.edu.cn/statistic.php?pid=2364","discussion":"http://acm.hdu.edu.cn/discuss/problem/list.php?problemid=2364"},"statement":[{"title":"Problem Description","content":"You find yourself trapped in a large rectangular room, made up of large square tiles; some are accessible, others are blocked by obstacles or walls. With a single step, you can move from one tile to another tile if it is horizontally or vertically adjacent (i.e. you cannot move diagonally).<br>To shake off any people following you, you do not want to move in a straight line. In fact, you want to take a turn at every opportunity, never moving in any single direction longer than strictly necessary. This means that if, for example, you enter a tile from the south, you will turn either left or right, leaving to the west or the east. Only if both directions are blocked, will you move on straight ahead. You never turn around and go back!<br>Given a map of the room and your starting location, figure out how long it will take you to escape (that is: reach the edge of the room).<br><br><center><img style=\"max-width:100%;\" src=\"../../../data/images/C145-1005-1.jpg\"></center><br>","type":"description","format":"html","require":["katex"]},{"title":"Input","content":"On the first line an integer t (1 &lt;= t &lt;= 100): the number of test cases. Then for each test case:<br><br>a line with two integers separated by a space, h and w (1 &lt;= h, w &lt;= 80), the height and width of the room;<br><br>then h lines, each containing w characters, describing the room. Each character is one of . (period; an accessible space), # (a blocked space) or @ (your starting location).<br>There will be exactly one @ character in each room description.<br>","type":"input_format","format":"html","require":["katex"]},{"title":"Output","content":"For each test case:<br><br>A line with an integer: the minimal number of steps necessary to reach the edge of the room, or -1 if no escape is possible.<br>","type":"output_format","format":"html","require":["katex"]},{"title":"Sample Input","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">2\n9 13\n#############\n#@..........#\n#####.#.#.#.#\n#...........#\n#.#.#.#.#.#.#\n#.#.......#.#\n#.#.#.#.#.#.#\n#...........#\n#####.#######\n4 6\n#.####\n#.#.##\n#...@#\n######</div></pre>","type":"example","format":"html","require":["katex"]},{"title":"Sample Output","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">31\n-1</div></pre>","type":"example","format":"html","require":["katex"]},{"title":"Source","content":" <a href=\"/search.php?field=problem&amp;key=bapc2007_pre&amp;source=1&amp;searchmode=source\"> bapc2007_pre </a> ","type":"source","format":"html","require":["katex"]}]}