{"title":"Mystery","time_limit":1500,"memory_limit":512,"operation":{"submit":"http://acm.hdu.edu.cn/submit.php?pid=6132","submissions":"http://acm.hdu.edu.cn/status.php?first=&pid=6132&user=&lang=0&status=0","statistics":"http://acm.hdu.edu.cn/statistic.php?pid=6132","discussion":"http://acm.hdu.edu.cn/discuss/problem/list.php?problemid=6132"},"statement":[{"title":"Problem Description","content":"$Hazel$ would like to find out everything about the binary tree.<br>She has a **full** binary tree ,each point has different labels.<br>regarding each point of tree ,$Hazel$ defines its height $h_i$ being the number of points which the shortest path from this point to a leaf has.<br>each point has weight $A_i$ which be defined as $X^{h_i}$.<br>$Hazel$ wants to paint every points by color $B_i$,Observing the following rules:<br>$\\bullet\\ \\forall i\\in T,B_i\\in N$<br>$\\bullet\\ \\forall i\\in T,B_i\\ge B_{fa_i}$<br>$\\bullet\\ Y\\ge 2\\times \\sum_{i\\in leaf} B_i-\\sum_{i\\in T}B_i$<br>(define $B_{fa_{root}}=0$ )<br>$Hazel$ defines the contribution of the tree $S$ as $\\sum_{i\\in T}A_i\\times B_i$.<br>She wants to know how many legal methods can she paint the tree,which cause $S$ is multiple of $P$.<br>You need to print $ans \\ mod (10^9+7)$.","type":"description","format":"html","require":["katex"]},{"title":"Input","content":"4 positive integer$H$,$X$,$Y$,$P$($1\\le H\\le 10^{18}$,$1\\le X\\le 500$,$0\\le Y\\le 10$,$1\\le P\\le 500$,$P$ is a prime number).<br>$H$means the tree has$2^H-1$ points.","type":"input_format","format":"html","require":["katex"]},{"title":"Output","content":"an integer showing $ans \\ mod (10^9+7)$.","type":"output_format","format":"html","require":["katex"]},{"title":"Sample Input","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">2\n8 10 7 11\n34819237827249996 146 5 349</div></pre>","type":"example","format":"html","require":["katex"]},{"title":"Sample Output","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">630072624\n673102984</div></pre>","type":"example","format":"html","require":["katex"]},{"title":"Source","content":" <a href=\"/search.php?field=problem&amp;key=2017+Multi-University+Training+Contest+-+Team+7&amp;source=1&amp;searchmode=source\"> 2017 Multi-University Training Contest - Team 7 </a> ","type":"source","format":"html","require":["katex"]}]}