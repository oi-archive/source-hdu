{"title":"Seeing the Stars","time_limit":8000,"memory_limit":32,"operation":{"submit":"http://acm.hdu.edu.cn/submit.php?pid=3813","submissions":"http://acm.hdu.edu.cn/status.php?first=&pid=3813&user=&lang=0&status=0","statistics":"http://acm.hdu.edu.cn/statistic.php?pid=3813","discussion":"http://acm.hdu.edu.cn/discuss/problem/list.php?problemid=3813"},"statement":[{"title":"Problem Description","content":"Dumbear likes to take a walk with his girlfriend, Jing. One day when they were taking a walk, they found that there were so many stars in the sky. But unfortunately, they could see few of the stars because many buildings around blocked their vision.<br><br>Jing asked Dumbear how many stars they could see. Jing also wanted to see the most beautiful star of them. Dumbear is very dumb, now he wants you to help him. If you know the locations of all the buildings, the directions of all the stars and the location of Dumbear and Jing, can you calculate the number of stars they could see and the minimum distance they should go for seeing the most beautiful star?<br><br>You can assume all the buildings are cuboids lay on the ground; all the stars are strictly above the ground and are infinite far away. You can also assume all the buildings do not intersect or touch one another and the location of Dumbear and Jing is strictly outside any building. Note that we consider a building blocks their vision if and only if the vision goes through the building strictly. Also note that no one can go through any building.","type":"description","format":"html","require":["katex"]},{"title":"Input","content":"The first line contains a single integer T, indicating the number of test cases.<br>Each test case begins with four integers N, M, X, Y indicate the number of the stars, the number of the buildings, and the coordinates of Dumbear and Jing on the ground.<br>Then N lines follow, each line contains three integers Xi, Yi, Zi indicate a star&#x2019;s direction. If your location is (x, y) on the ground, then the star will be in the direction (x, y, 0) =&gt; (x + Xi, y + Yi, Zi). Note that the most beautiful star is always the first.<br>Then M lines follow, each line contains five integers X1i, Y1i, X2i, Y2i, Hi indicate the building&#x2019;s lower left coordinates, upper right coordinates on the ground and the height of it.<br><br>Technical Specification<br><br>1. 1 &lt;= T &lt;= 10020<br>2. 1 &lt;= N &lt;= 1000&#xA0;&#xA0;Note for more than 99% of the test cases, 1 &lt;= N &lt;= 10<br>3. 1 &lt;= M &lt;= 20&#xA0;&#xA0;&#xA0;&#xA0;Note for more than 99% of the test cases, 1 &lt;= M &lt;= 5<br>4. 0 &lt;= |X|, |Y|, |Xi|, |Yi|, |X1i|, |Y1i|, |X2i|, |Y2i| &lt;= 1000<br>5. X1i &lt; X2i, Y1i &lt; Y2i, 10 &lt;= Zi, Hi &lt;= 100","type":"input_format","format":"html","require":["katex"]},{"title":"Output","content":"For each test case, output the case number first, then the number of the stars they can see directly and the minimum distance they should go to see the most beautiful star. You should round the distance to 2 digits after the decimal point.","type":"output_format","format":"html","require":["katex"]},{"title":"Sample Input","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">1\n3 1 0 0\n1 1 1\n1 0 1\n0 1 1\n1 1 3 3 2</div></pre>","type":"example","format":"html","require":["katex"]},{"title":"Sample Output","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">Case 1: 2 1.00</div></pre>","type":"example","format":"html","require":["katex"]},{"title":"Author","content":"Dumbear@WHU","type":"source","format":"html","require":["katex"]},{"title":"Source","content":" <a href=\"/search.php?field=problem&amp;key=The+6th+Central+China+Invitational+Programming+Contest+and+9th+Wuhan+University+Programming+Contest+Preliminary&amp;source=1&amp;searchmode=source\"> The 6th Central China Invitational Programming Contest and 9th Wuhan University Programming Contest Preliminary </a> ","type":"source","format":"html","require":["katex"]}]}