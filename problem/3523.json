{"title":"Image copy detection ","time_limit":2000,"memory_limit":32,"operation":{"submit":"http://acm.hdu.edu.cn/submit.php?pid=3523","submissions":"http://acm.hdu.edu.cn/status.php?first=&pid=3523&user=&lang=0&status=0","statistics":"http://acm.hdu.edu.cn/statistic.php?pid=3523","discussion":"http://acm.hdu.edu.cn/discuss/problem/list.php?problemid=3523"},"statement":[{"title":"Problem Description","content":"The success of the Internet and cost-effective digital storage device has made it possible to replicate, transmit, and distribute digital content in an effortless way. Thus, the protection of intellectual Property right (IPR) has become a crucial legal issue.  Detecting copies of digital media(images, audio and video) is a basic requirement for IPR protection (or copyright protection).The applications of copydetection include usage tracking and copyright violation enforcement.<br>For those above purposes, the image copy detection system came out.It aggregated all the images which were viewed as a copy of original image.In this system,an image is partitioned into m&#xFFFD;&#xFFFD;n equalsized blocks,which makes the system independent of input image sizes,and an m&#xFFFD;&#xFFFD;n sub-image is calculated by taking the average value of each block(see Figure.1(b)), This array is converted to a rank matrix as shown in Fig.1(c).Suppose that the intensity values in Fig.1(b) are changed in the copied image so that its sub-image has values:{{30, 60, 40}, {70, 90, 110}, {50, 100, 80}}. Nevertheless,its rank matrix is identical to that shown in Fig. 1(c) and thus perfect matching with original image can be achieved.<br><br><center><img style=\"max-width:100%;\" src=\"../../data/images/C299-1007-1.jpg\"></center> <br><br>Fig.1 (a)An image is divided into m&#xFFFD;&#xFFFD;n blocks (3&#xFFFD;&#xFFFD;3 in this example),(b)average values of blocks, and(c)rank matrix of (b). Let T and Q represent test image and original image,N represent the matrix size;there exists N tuples (t1,q1),&#xFFFD;&#xFFFD;,( tn,qn),&#xFFFD;&#xFFFD;,( tN,qN)(the order of the rank matrix:from left to right and from top to bottom).Now we define D(T,Q) = <img style=\"max-width:100%;\" src=\"../../data/images/C299-1007-2.jpg\">measures the distance between the two images(it&#xFFFD;&#xFFFD;s obvious that if D(T,Q) gets smaller while the probability of the test image is considered as a copy of original image by the system becomes larger). Since there are M original images in the image copy detection system(Q1&#xFFFD;&#xFFFD;QM). And the distance between T and some original images is given by D(T,Q1&#xFFFD;&#xFFFD;QM)= <img style=\"max-width:100%;\" src=\"../../data/images/C299-1007-3.jpg\"> To make it simple,we want to find an image which owns least D(T,Q1&#xFFFD;&#xFFFD;QM).<br>","type":"description","format":"html"},{"title":"Input","content":"The first line of input should give the number of cases, T (at most 100). T test cases follow. The first line of each test case contains two integer n (1 &#xFFFD;&#xFFFD; n &#xFFFD;&#xFFFD; 100) and m(1 &#xFFFD;&#xFFFD; m &#xFFFD;&#xFFFD; 100) indicating the size of rank matrix and number of original images. The following m lines each contains a sequence of n different integers denotes the rank matrix.","type":"input_format","format":"html"},{"title":"Output","content":"For each test case, output one line containing &quot;Case #x: y&quot;, where x is the case number  (starting from 1) and y is the least distance D(T,Q1&#xFFFD;&#xFFFD;QM).<br>","type":"output_format","format":"html"},{"title":"Sample Input","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">2\n3 2\n1 2 3\n1 3 2\n9 3\n1 4 2 5 7 9 3 8 6\n2 1 4 5 9 3 7 6 8\n9 8 7 6 5 4 3 2 1</div></pre>","type":"example","format":"html"},{"title":"Sample Output","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">Case #1: 2\nCase #2: 58</div></pre>","type":"example","format":"html"},{"title":"Source","content":" <a href=\"/search.php?field=problem&amp;key=2010+ACM-ICPC+Multi-University+Training+Contest%A3%A89%A3%A9%A1%AA%A1%AAHost+by+HNU&amp;source=1&amp;searchmode=source\"> 2010 ACM-ICPC Multi-University Training Contest&#xFFFD;&#xFFFD;9&#xFFFD;&#xFFFD;&#xFFFD;&#xFFFD;&#xFFFD;&#xFFFD;Host by HNU </a> ","type":"source","format":"html"}]}