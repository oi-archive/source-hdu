{"title":"Dying Light","time_limit":1000,"memory_limit":128,"operation":{"submit":"http://acm.hdu.edu.cn/submit.php?pid=6164","submissions":"http://acm.hdu.edu.cn/status.php?first=&pid=6164&user=&lang=0&status=0","statistics":"http://acm.hdu.edu.cn/statistic.php?pid=6164","discussion":"http://acm.hdu.edu.cn/discuss/problem/list.php?problemid=6164"},"statement":[{"title":"Problem Description","content":" <center><img style=\"max-width:100%;\" src=\"../../../data/images/C768-1004-1.jpg\"></center><br>LsF is visiting a local amusement park with his friends, and a mirror room successfully attracts his attention. Inside the mirror room, there are n plane mirrors standing vertically on the ground. They are placed end-to-end and face-to-face so that if you overlook the room, you can find a convex hull and the all the reflector surfaces are inside the pattern. The height of the mirror is not important in this problem.<br>Due to imperfect manufacturing techniques, mirrors can&apos;t reflect light without lose of energy. Each mirror has a reflection efficiency k, which means if the incident light&apos;s intensity is I, the reflected light&apos;s intensity will be reduced to kI. The only exception could happen when the light precisely goes to the two mirrors&apos; junction. In that case, the light will be completely absorbed instantly. Note the laws of reflection of light applies in all other situations, that the angle of incidence equals the angle of reflection.<br>Now LsF stands inside the mirror hall, and shoots a laser beam paralleled to the ground using his laser pointer. Unfortunately, his laser pointer can only shot laser beams with intensity of 1. What&apos;s worse, a laser beam is considered disappeared if its intensity is below $10^{-4}$. There&apos;s not much magnitude distance between the two numbers.<br>LsF wants to know how many touches can his laser beam make with mirrors before it disappears.<br>","type":"description","format":"html"},{"title":"Input","content":"The first line contains an integer n(3&#x2264;n&#x2264;1000), indicating the number of mirrors;<br>Then n lines follow. The ith line contains three real numbers $x_i,y_i,k_i(-10^9&#x2264;x_i,y_i&#x2264;10^9;0&#x2264;k_i&#x2264;0.9)$, which means the ith mirror&apos;s one end is at position $(x_i,y_i)$ and another end is at ($x_{i+1}$mod n,$y_{i+1}$mod n), and its reflectivity is $k_i$.<br>Next there are two real numbers Vx,Vy(-109&#x2264;Vx,Vy&#x2264;109), indicating the initial direction vector of the laser beam.<br>LsF is standing at the origin (0, 0).<br><br>","type":"input_format","format":"html"},{"title":"Output","content":"Output an integer in one line, the number of touches the laser beam could make before it disappears.","type":"output_format","format":"html"},{"title":"Sample Input","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">4\n1 2 0.5\n-1 0 0.5\n1 -2 0.5\n3 0 0.5\n0 1\n4\n1 1 0.5\n-1 1 0.5\n-1 -1 0.5\n1 -1 0.5\n1 1</div></pre>","type":"example","format":"html"},{"title":"Sample Output","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">14\n1</div></pre>","type":"example","format":"html"},{"title":"Source","content":" <a href=\"/search.php?field=problem&amp;key=2017+Multi-University+Training+Contest+-+Team+9&amp;source=1&amp;searchmode=source\"> 2017 Multi-University Training Contest - Team 9 </a> ","type":"source","format":"html"}]}