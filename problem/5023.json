{"title":"A Corrupt Mayor's Performance Art","time_limit":1000,"memory_limit":97.65625,"operation":{"submit":"http://acm.hdu.edu.cn/submit.php?pid=5023","submissions":"http://acm.hdu.edu.cn/status.php?first=&pid=5023&user=&lang=0&status=0","statistics":"http://acm.hdu.edu.cn/statistic.php?pid=5023","discussion":"http://acm.hdu.edu.cn/discuss/problem/list.php?problemid=5023"},"statement":[{"title":"Problem Description","content":"   Corrupt governors always find ways to get dirty money.  Paint something, then sell the worthless painting at a high price to someone who wants to bribe him/her on an auction, this seemed a safe way for mayor X to make money.<br><br>   Because a lot of people praised mayor X&apos;s painting(of course, X was a mayor), mayor X believed more and more that he was a very talented painter. Soon mayor X was not satisfied with only making money. He wanted to be a famous painter. So he joined the local painting associates. Other painters had to elect him as the chairman of the associates. Then his painting sold at better price.<br><br>   The local middle school from which mayor X graduated, wanted to beat mayor X&apos;s horse fart(In Chinese English, beating one&apos;s horse fart means flattering one hard). They built a wall, and invited mayor X to paint on it. Mayor X was very happy. But he really had no idea about what to paint because he could only paint very abstract paintings which nobody really understand. Mayor X&apos;s secretary suggested that he could make this thing not only a painting, but also a performance art work.<br><br>   This was the secretary&apos;s idea:<br><br>   The wall was divided into N segments and the width of each segment was one cun(cun is a Chinese length unit). All segments were numbered from 1 to N, from left to right. There were 30 kinds of colors mayor X could use to paint the wall. They named those colors as color 1, color 2 .... color 30. The wall&apos;s original color was color 2. Every time mayor X would paint some consecutive segments with a certain kind of color, and he did this for many times. Trying to make his performance art fancy, mayor X declared that at any moment, if someone asked how many kind of colors were there on any consecutive segments, he could give the number immediately without counting.<br><br>   But mayor X didn&apos;t know how to give the right answer. Your friend, Mr. W was an secret officer of anti-corruption bureau, he helped mayor X on this problem and gained his trust. Do you know how Mr. Q did this?","type":"description","format":"html"},{"title":"Input","content":"   There are several test cases.<br><br>   For each test case:<br><br>   The first line contains two integers, N and M ,meaning that the wall is divided into N segments and there are M operations(0 &lt; N &lt;= 1,000,000; 0&lt;M&lt;=100,000) <br><br>   Then M lines follow, each representing an operation. There are two kinds of operations, as described below: <br><br>   1)  P a b c <br>   a, b and c are integers. This operation means that mayor X painted all segments from segment a to segment b with color c ( 0 &lt; a&lt;=b &lt;= N, 0 &lt; c &lt;= 30).<br><br>   2)  Q a b<br>   a and b are integers. This is a query operation. It means that someone asked that how many kinds of colors were there from segment a to segment b ( 0 &lt; a&lt;=b &lt;= N).<br><br>   Please note that the operations are given in time sequence.<br> <br>   The input ends with M = 0 and N = 0.","type":"input_format","format":"html"},{"title":"Output","content":"   For each query operation, print all kinds of color on the queried segments. For color 1, print 1, for color 2, print 2 ... etc. And this color sequence must be in ascending order.","type":"output_format","format":"html"},{"title":"Sample Input","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">5 10\nP 1 2 3\nP 2 3 4\nQ 2 3\nQ 1 3\nP 3 5 4\nP 1 2 7\nQ 1 3\nQ 3 4\nP 5 5 8\nQ 1 5\n0 0</div></pre>","type":"example","format":"html"},{"title":"Sample Output","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">4\n3 4\n4 7\n4\n4 7 8</div></pre>","type":"example","format":"html"},{"title":"Source","content":" <a href=\"/search.php?field=problem&amp;key=2014+ACM%2FICPC+Asia+Regional+Guangzhou+Online&amp;source=1&amp;searchmode=source\"> 2014 ACM/ICPC Asia Regional Guangzhou Online </a> ","type":"source","format":"html"}]}