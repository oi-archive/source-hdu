{"title":"Car Trialling","time_limit":1000,"memory_limit":32,"operation":{"submit":"http://acm.hdu.edu.cn/submit.php?pid=1644","submissions":"http://acm.hdu.edu.cn/status.php?first=&pid=1644&user=&lang=0&status=0","statistics":"http://acm.hdu.edu.cn/statistic.php?pid=1644","discussion":"http://acm.hdu.edu.cn/discuss/problem/list.php?problemid=1644"},"statement":[{"title":"Problem Description","content":"Car trialling requires the following of carefully worded instructions. When setting a trial, the organiser places traps in the instructions to catch out the unwary. <br><br>Write a program to determine whether an instruction obeys the following rules, which are loosely based on real car trialling instructions. BOLD-TEXT indicates text as it appears in the instruction (case sensitive),  separates options of which exactly one must be chosen, and .. expands, so A..D is equivalent to A  B  C  D . <br><br>instruction = navigational  time-keeping  navigational AND time-keeping <br><br>navigational = directional  navigational AND THEN directional <br><br>directional = how direction  how direction where <br><br>how = GO  GO when  KEEP <br><br>direction = RIGHT  LEFT <br><br>when = FIRST  SECOND  THIRD <br><br>where = AT sign <br><br>sign = &quot;signwords&quot; <br><br>signwords = s-word  signwords s-word <br><br>s-word = letter  s-word letter <br><br>letter = A..Z  . <br><br>time-keeping = record  change <br><br>record = RECORD TIME <br><br>change = cas TO nnn KMH <br><br>cas = CHANGE AVERAGE SPEED  CAS <br><br>nnn = digit  nnn digit <br><br>digit = 0..9 Note that s-word and nnn are sequences of letters and digits respectively, with no intervening spaces. There will be one or more spaces between items except before a period (.), after the opening speech marks or before the closing speech marks. <br>","type":"description","format":"html"},{"title":"Input","content":"Each input line will consist of not more than 75 characters. The input will be terminated by a line consisting of a single #. ","type":"input_format","format":"html"},{"title":"Output","content":"The output will consist of a series of sequentially numbered lines, either containing the valid instruction, or the text Trap! if the line did not obey the rules. The line number will be right justified in a field of 3 characters, followed by a full-stop, a single space, and the instruction, with sequences of more than one space reduced to single spaces. ","type":"output_format","format":"html"},{"title":"Sample Input","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">KEEP LEFT AND THEN GO RIGHT\nCAS TO 20 KMH\nGO FIRST       RIGHT AT &quot;SMITH ST.&quot;  AND   CAS TO 20 KMH\nGO 2nd RIGHT\nGO LEFT AT &quot;SMITH STREET AND RECORD TIME\nKEEP RIGHT AND THEN RECORD TIME\n#</div></pre>","type":"example","format":"html"},{"title":"Sample Output","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">  1. KEEP LEFT AND THEN GO RIGHT\n  2. CAS TO 20 KMH\n  3. GO FIRST RIGHT AT &quot;SMITH ST.&quot; AND CAS TO 20 KMH\n  4. Trap!\n  5. Trap!\n  6. Trap!</div></pre>","type":"example","format":"html"},{"title":"Source","content":" <a href=\"/search.php?field=problem&amp;key=UVA&amp;source=1&amp;searchmode=source\"> UVA </a> ","type":"source","format":"html"}]}