{"title":"Collecting Forest Wildlife","time_limit":1000,"memory_limit":32,"operation":{"submit":"http://acm.hdu.edu.cn/submit.php?pid=2596","submissions":"http://acm.hdu.edu.cn/status.php?first=&pid=2596&user=&lang=0&status=0","statistics":"http://acm.hdu.edu.cn/statistic.php?pid=2596","discussion":"http://acm.hdu.edu.cn/discuss/problem/list.php?problemid=2596"},"statement":[{"title":"Problem Description","content":"Volunteers from the World Wildlife Foundation (WWF) have arrived in Springfield in a WWF truck.<br>They are collecting endangered animals living in the nearby Gump Forest, and are asking Lisa for help.<br>The WWF volunteers have given Lisa a map of the Gump Forest. The forest contains a number of clearings, and trails connecting the clearings. Different types of endangered animals live on each trail, no animals live in the clearings. Every trail must have at least one animal. Two trails connected to the same clearing cannot have the same animal.<br>Trails in the Gump Forest are narrow, so the WWF truck can only turn once it reaches the end of the trail and reaches a clearing. Exactly one endangered animal must be collected each time the truck drives along a trail. A trail may be traveled many times to pick up multiple animals.<br>TheWWF truck is filled with a number of cages, where each cage is designed for a single endangered species. Unfortunately, the truck is so filled with cages that the cages can only be filled in a certain order. Lisa has been asked to go with the WWF volunteers in their truck and guide the truck through<br>the Gump Forest and fill all the cages in the truck. The truck starts at the clearing at the entrance, goes through the forest, and returns to the entrance.","type":"description","format":"html"},{"title":"Input","content":"Animals are given as words(lowercases). Clearings are given as numbers. There may be up to 500 clearings.<br>Clearing 0 is always the entrance to Gump Forest.<br>The input begins with the Gump Forest trail map. Each line describes a trail between two clearings as a pair of numbers, followed by a list of animals living on the trail. Remaining lines begain with list of animals to be collected, in the order they are to be collected.","type":"input_format","format":"html"},{"title":"Output","content":"For each list of animals to be collected, your program should output the successful path through the Gump Forest as a sequence of numbers in the order clearings are visited, starting and ending with 0. If multiple successful paths are possible, print any successful path. If there is no successful path<br>through the Gump Forest that can fill up the truck and return it to the entrance, your program should output &#xFFFD;&#xFFFD;Failed&#xFFFD;&#xFFFD; for that list.<br>Hint: Don&#xFFFD;&#xFFFD;t try to solve the problem in a brute-force manner by enumerating all possible paths through Gump Forest. (It will take too long.)","type":"output_format","format":"html"},{"title":"Sample Input","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">0 1 puma\n1 2 frog\npuma puma\npuma frog frog puma\n1 0 puma lynx\n1 2 vole\n2 0 toad\ntoad vole lynx puma lynx\ntoad puma lynx</div></pre>","type":"example","format":"html"},{"title":"Sample Output","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">0 1 0\n0 1 2 1 0\n0 2 1 0 1 0\nFailed</div></pre>","type":"example","format":"html"},{"title":"Source","content":" <a href=\"/search.php?field=problem&amp;key=HDU+2010-05+Programming+Contest+&amp;source=1&amp;searchmode=source\"> HDU 2010-05 Programming Contest  </a> ","type":"source","format":"html"}]}