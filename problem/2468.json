{"title":"Experiment on a … “Cable”","time_limit":5000,"memory_limit":32,"operation":{"submit":"http://acm.hdu.edu.cn/submit.php?pid=2468","submissions":"http://acm.hdu.edu.cn/status.php?first=&pid=2468&user=&lang=0&status=0","statistics":"http://acm.hdu.edu.cn/statistic.php?pid=2468","discussion":"http://acm.hdu.edu.cn/discuss/problem/list.php?problemid=2468"},"statement":[{"title":"Problem Description","content":"The head technical person, Joey, at ACM (Association for Cyberspace Management)has just received a weird cable-like device &#x2013; supposedly invented by programmers during a competition &#x2013; for inspection.<br><br>The device may be viewed as a straight bi-directional cable, which can be used for transmitting arbitrary number of data packages simultaneously. The speed with which each package is sent will be pre-determined by the device and furthermore may vary within a certain range; however it will remain constant throughout each package&#x2019;s entire transmission process. The time it takes for a single data package with speed V to arrive at the opposite end of the cable is thus L/V, where L is the length of the cable.<br><br>In addition, the user may sometimes send a fixed-speed &#x201C;detector&#x201D; package,<br>which is capable of reporting the number of data packages alongside itself at any time.<br><br>Finding this device highly amusing, Joey decides to perform an experiment on the odd &#x201C;cable&#x201D;. He has scheduled N packages to be sent from the left side and another M to be sent from the other side of the cable; also, he has calculated the possible speed range for each data package. With this information in hand, Joey wants to estimate the effectiveness of a detector he will send. For a detector that departs at a certain time, its effectiveness can be represented as a real number in the range [0..1], which is simply the ratio of the time during which the detector has a chance of reporting all N + M packages (explained below) to the total time.<br><br>If Joey sends the detector at an arbitrary time in [S, T] with speed V from the left side of the cable, what is the average effectiveness he can achieve?<br>Note: For a detector to have a chance of reporting all N + M packages at time T<sub>0</sub>, the device must be able to schedule all data packages with such speeds so that all can share the same position with the detector at time T<sub>0</sub>.","type":"description","format":"html"},{"title":"Input","content":"There are multiple test cases in the input file.<br>Each test case starts with one integer, L ( 1 &#x2264; L &#x2264; 10<sup>6</sup>), the length of the cable.<br>The next line contains one integer, N, the number of packages Joey will send from the<br>left side, followed by N lines, the i<sup>th</sup> line with three real numbers, MinV<sub>i</sub>, Max<sub>Vi</sub>, and Leave<sub>i</sub>(1&#x2264;MinV<sub>i</sub>&#x2264;Max<sub>Vi</sub>), which are the minimum speed, maximum speed, and<br>departure time for package i , respectively. Another (M + 1) lines follow, describing the<br>packages departing from the right side. The last line of the input contains three real numbers, S, T and V (T - S &#x2265; 1), whose meanings are described above.<br>The total number of packages Joey sent will be in the interval [1,5000]. It is<br>guaranteed that the speed of any data packet, including that of the detector, will be no less than 0.01; also, all real numbers in the input will be given with at most two digits after the decimal point, and will belong to the interval: [0 , 10<sup>6</sup>].<br>Two successive test cases are separated by a blank line. A case with L = 0<br>indicates the end of the input file, and should not be processed by your program.","type":"input_format","format":"html"},{"title":"Output","content":"Please print the average effectiveness of the detector&#x2019;s trip, with precision up to 0.00001.","type":"output_format","format":"html"},{"title":"Sample Input","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">5\n1\n5.00 10.00 2.00\n2\n10.05 11.50 0.05\n1.68 2.00 0.01\n3.00 4.00 1000\n5\n1\n1.25 2.50 1.0\n0\n1.00 5.00 2.50\n0</div></pre>","type":"example","format":"html"},{"title":"Sample Output","content":"<pre><div style=\"font-family:Courier New,Courier,monospace;\">Case #1: 0.00000\nCase #2: 0.25000</div></pre>","type":"example","format":"html"},{"title":"Source","content":" <a href=\"/search.php?field=problem&amp;key=2008+Asia+Regional+Hangzhou&amp;source=1&amp;searchmode=source\"> 2008 Asia Regional Hangzhou </a> ","type":"source","format":"html"}]}